-----------------------------------------------------------------------------
--
--  Logical unit: InventoryPartInStock
--  Component:    INVENT
--
--  IFS Developer Studio Template Version 3.0
--
--  Date    Sign    History
--  ------  ------  ---------------------------------------------------------
--  190909  SBalLK  Bug 149820 (SCZ-6741), Rearrange the columns by moving part column as the last column of the view for support IEE related LOV implementation.
--  190813  JaBalk  SCUXXW4-20735, Modified Inventory_Part_In_Stock_Lov28 to include warehouse fields.
--  190625  ChFolk  SCUXXW4-21753, Modified Inventory_Part_In_Stock_Lov25 to mark Configuration_Id and LOcation_No as Key attributes in veiw comments.
--  190426  ChFolk  SCUXXW4-16439, Changed the datatype of HandlingUnitTypeId in Inventory_Part_In_Stock_Lov4.
--  190329  KHVESE  SCUXXW4-5659, Updated view inventory_part_in_stock_lov28 with correct keys.
--  180914  DhaKlk  MFUXXW4-3659, Added objversion to Inventory_Part_In_Stock_Lov12.
--  180914  DhaKlk  MFUXXW4-12720, Added Inventory_Part_In_Stock_Lov12.
--  180809  RaKalk  MFUXXW4-3737, Added objid column to Inventory_Part_In_Stock_Avail, Inventory_Part_In_Stock_Total and Inventory_Part_In_Stock_Lov8.
--  180618  Milise  SCUXXW4-12297, Added missing datatype in VIEW Inventory_Part_In_Stock_Lov4:9:10:11:28 .
--  180530  SWiclk  SCUXXW4-12210, Added missing db columns location_type_db, freeze_flag_db and part_ownership_db to INVENTORY_PART_IN_STOCK_LOV,
--  180530          INVENTORY_PART_IN_STOCK_LOV3, INVENTORY_PART_IN_STOCK_LOV4, INVENTORY_PART_IN_STOCK_LOV8, INVENTORY_PART_IN_STOCK_LOV22 appropriately.
--  180222  RoJalk  STRSC-15257, Modified Single_Manual_Reservation_Alt and added Source_Qty_Reserved.
--  171108  DAYJLK  STRSC-13133, Added view Single_Manual_Reservation_Alt
--  171107  DAYJLK  STRSC-13133, Added view Ship_Src_Reservation_Stock_Alt.
--  171018  LEPESE  STRSC-13187, Added columns part_movement_control_db and location_group to view inventory_part_in_stock_total.
--  171018          Added column location_group to view inventory_part_in_stock_avail.
--  170508  PrYaLK  Bug 134600, Modified Inventory_Part_In_Stock_Lov4 in order to change the key attributes of Handling_Unit_Id, Serial_No,
--  170508          Eng_Chg_Level, Waiv_Dev_Rej_No and Activity_Seq.
--  170120  Dinklk  APPUXX-8334, Added a view Inventory_Part_In_Stock_Lov29.
--  161125  PrYaLK  Bug 132615, Modified INVENTORY_PART_IN_STOCK_LOV3 in order to enable the location group of From Location No LOV.
--  160920  AwWelk  GEN-967, Added public view Inv_Part_Plannable_Stock_B_Pub which will show the plannable stock figures for planning
--  160920          method B parts. Made Inv_Part_Plannable_Stock_Pub a generalized view by removing the Planning method B filteration.
--  160915  ErFelk  Bug 127298, Added part_ownership to INVENTORY_PART_IN_STOCK_LOV22 to show ownership in analysis result client.
--  160905  KhVese  LIM-5832, Added Inventory_Part_In_Stock_Lov28. 
--  160812  NaLrlk  LIM-8242, Added nullable source reference columns to inventory_part_in_stock_uiv view to support for attach/unattach HU.
--  160412  Chfose  LIM-6145, Added condition_code, catch_qty_in_transit, catch_qty_onhand, objid and objversion to Inventory_Part_In_Stock_Pub.
--  160204  Chfose  LIM-5711, Created new views Inventory_Part_In_Stock_Lov10 and 11 and added additional Handling Unit information to 
--  160204          Inventory_Part_In_Stock_Lov4,5,6,7 and 9.
--  151124  Chfose  LIM-4471, Renamed Inventory_Part_In_Stock_Nopal to Inventory_Part_Pick_Ship_Stock and Invent_Part_in_Stock_Nopal_Lov to Inventory_Part_In_Stock_Lov27.
--  151118  KhVese  LIM-2926, Added rotable_part_pool_id to Inventory_Part_In_Stock_Total. 
--  151026  DaZase  LIM-4297, Added sscc and alt_handling_unit_label_id to Inventory_Part_In_Stock_Total. 
--  151016  JeLise  LIM-3893, Removed all pallet related location types in the where-statements.
--  150729  ShKolk  Bug 122064, Added new view INVENTORY_PART_IN_STOCK_UIV.
--  150629  Chfose  LIM-3508, Modified Inventory_Part_In_Stock_Lov5,6,7 and 9 to make them more equal and fetch data from the same view.
--  150617  Chfose  LIM-3148, Added handling_unit_id to LOV's where missing.
--  150616  Chfose  LIM-3147, Added handling_unit_id to Inventory_Part_In_Stock_Lov4,5,6,7 and reordered them as well as added a new view Inventory_Part_In_Stock_Lov9.
--  140731  BudKlk  Bug 118000, Modified the view INVENTORY_PART_IN_STOCK_LOV25 by adding a condition to filter the records from location_type 
--  140731          and removed pallet_handled column from the view.
--  120909  HimRlk  Modified view Inventory_Part_In_Stock_Res by adding supply site reservation type filtration 
--  120909          along with user allowed filtration. Removed IfNotNull Security check annotation from Inventory_Part_In_Stock_Res.
-----------------------------------------------------------------------------

layer Core;

-------------------- COMMON COLUMN DEFINITIONS ------------------------------

COLUMN Description IS
   Flags      = 'A----'
   Datatype   = 'STRING'
   Prompt     = 'Description';

COLUMN Part_Supply_Control_Db IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Part Supply Control';

COLUMN Part_Reservation_Control_Db IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Part Reservation Control';

COLUMN Part_Order_Issue_Control_Db IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Part Order Issue Control';

COLUMN Part_Manual_Reserv_Ctrl_Db IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Part Manual Reserv Ctrl';

COLUMN Part_Movement_Control_Db IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Part Movement Control';

COLUMN Warehouse_Route_Order IS
   Flags      = 'A----'
   Datatype   = 'STRING(15)'
   Prompt     = 'Warehouse Route Order';

COLUMN Bay_Route_Order IS
   Flags      = 'A----'
   Datatype   = 'STRING(5)'
   Prompt     = 'Bay Route Order';

COLUMN Row_Route_Order IS
   Flags      = 'A----'
   Datatype   = 'STRING(5)'
   Prompt     = 'Row Route Order';

COLUMN Tier_Route_Order IS
   Flags      = 'A----'
   Datatype   = 'STRING(5)'
   Prompt     = 'Tier Route Order';

COLUMN Bin_Route_Order IS
   Flags      = 'A----'
   Datatype   = 'STRING(5)'
   Prompt     = 'Bin Route Order';

COLUMN Condition_Code IS
   Flags      = 'A----'
   Datatype   = 'STRING(10)'
   Prompt     = 'Condition Code';

COLUMN Operational_Condition IS
   Flags      = 'A----'
   Datatype   = 'STRING(200)'
   Prompt     = 'Operational Condition';

COLUMN Qty_Available IS
   Flags      = 'A---L'
   Datatype   = 'NUMBER'
   Prompt     = 'Qty Available';

COLUMN Location_Group IS
   Flags      = 'A----'
   Datatype   = 'STRING(5)'
   Prompt     = 'Location Group';

COLUMN Inventory_Valuation_Method_Db IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Inventory Valuation Method';

COLUMN Inventory_Part_Cost_Level_Db IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Inventory Part Cost Level';

COLUMN Add_To_Pool IS
   Flags      = 'A----'
   Datatype   = 'STRING(20)'
   Prompt     = 'Rotable Part Pool Id';

COLUMN Unit_Meas IS
   Flags      = 'A---L'
   Datatype   = 'STRING(10)'
   Prompt     = 'UoM';

COLUMN Catch_Uom IS
   Flags      = 'A---L'
   Datatype   = 'STRING(30)'
   Prompt     = 'Catch UoM';

COLUMN Revision_No IS
   Flags      = 'A---L'
   Datatype   = 'STRING(6)'
   Prompt     = 'Rev No';

-------------------- PUBLIC VIEW DEFINITIONS --------------------------------
@ServerOnlyAccess
VIEW Inventory_Part_In_Stock_Pub IS
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       handling_unit_id               handling_unit_id,
       expiration_date                expiration_date,
       freeze_flag                    freeze_flag_db,
       last_count_date                last_count_date,
       location_type                  location_type_db,
       qty_in_transit                 qty_in_transit,
       qty_onhand                     qty_onhand,
       qty_reserved                   qty_reserved,
       receipt_date                   receipt_date,
       availability_control_id        availability_control_id,
       rotable_part_pool_id           rotable_part_pool_id,
       project_id                     project_id,
       part_ownership                 part_ownership_db,
       owning_customer_no             owning_customer_no,
       owning_vendor_no               owning_vendor_no,
       bin_no                         bin_no,
       tier_no                        tier_no,
       row_no                         row_no,
       bay_no                         bay_no,
       warehouse                      warehouse,
       DECODE(ip.serial_no, '*', DECODE(ip.lot_batch_no, '*', NULL, (SELECT lbm.condition_code
                                                                     FROM lot_batch_master_pub lbm
                                                                     WHERE ip.part_no = lbm.part_no
                                                                     AND ip.lot_batch_no = lbm.lot_batch_no)),
            (SELECT psc.condition_code
             FROM  part_serial_catalog_pub psc
             WHERE ip.part_no   = psc.part_no
             AND   ip.serial_no = psc.serial_no))                    condition_code,
       catch_qty_in_transit                                          catch_qty_in_transit,
       catch_qty_onhand                                              catch_qty_onhand, 
       rowid                                                         objid,
       ltrim(lpad(to_char(rowversion,'YYYYMMDDHH24MISS'), 2000))     objversion,
       rowkey                                                        objkey
FROM   inventory_part_in_stock_tab ip;

@ServerOnlyAccess
VIEW Inv_Part_Plannable_Stock_Pub IS
   SELECT   it.part_no                                                              part_no,
            it.contract                                                             contract,
            NVL(SUM(it.qty_onhand),0)                                               qty_onhand,
            NVL(SUM(it.qty_in_transit),0)                                           qty_in_transit,
            (SELECT MAX(ith.date_created)
               FROM inventory_transaction_hist_tab ith
              WHERE ith.part_no = it.part_no
                AND ith.contract = it.contract
                AND EXISTS(SELECT 1
                             FROM Mpccom_Transaction_Code_Pub mtc
                            WHERE mtc.transaction_code = ith.transaction_code
                              AND mtc.inventory_stat_direction_db != 'UNAFFECTED')) last_modified_date
      FROM  inventory_part_in_stock_tab it
      WHERE NVL((SELECT pac.part_supply_control
                   FROM part_availability_control_tab pac
                  WHERE pac.availability_control_id = it.availability_control_id), 'NETTABLE') = 'NETTABLE'
      AND   ((expiration_date IS NULL) OR (expiration_date>((SYSDATE + ((SELECT st.offset
                                                                           FROM Site_Public st
                                                                          WHERE st.contract = it.contract)/24)) +
                                                                          (SELECT ip.min_durab_days_planning
                                                                             FROM inventory_part_tab ip
                                                                            WHERE ip.contract = it.contract
                                                                              AND ip.part_no = it.part_no))))
      AND   location_type IN ('PICKING',
                              'F',
                              'MANUFACTURING',
                              'PALLET',
                              'DEEP',
                              'BUFFER',
                              'DELIVERY',
                              'SHIPMENT')
      AND   configuration_id = '*'
      AND   activity_seq     = 0
      AND   part_ownership IN('COMPANY OWNED',
                              'CONSIGNMENT')
      AND   EXISTS  (SELECT 1
                     FROM  inventory_part_tab             a,
                           inventory_part_status_par_tab  b
                     WHERE it.contract          = a.contract
                       AND it.part_no           = a.part_no
                       AND a.stock_management   = 'SYSTEM MANAGED INVENTORY'
                       AND a.part_status        = b.part_status
                       AND b.onhand_flag        = 'Y'
                       AND b.supply_flag        = 'Y')
      GROUP BY it.part_no, it.contract;
      
@ServerOnlyAccess      
VIEW Inv_Part_Plannable_Stock_B_Pub IS
   SELECT   a.part_no                                                            part_no,
            a.contract                                                           contract,
            NVL(SUM(a.qty_onhand),0) + NVL(SUM(a.qty_in_transit),0)              qty_onhand,
            a.last_modified_date                                                 last_modified_date
   FROM Inv_Part_Plannable_Stock_Pub a
   INNER JOIN inventory_part_planning_tab b
      ON a.contract        = b.contract
     AND a.part_no         = b.part_no
     AND b.planning_method = 'B'
     GROUP BY a.part_no, a.contract, a.last_modified_date;
     
-------------------- PRIVATE VIEW DEFINITIONS -------------------------------

VIEW Inventory_Part_In_Stock_Avail IS
   Prompt = 'InvPartLocation'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Flags = 'K----'
   Serial_No.Flags = 'K----'
   Eng_Chg_Level.Flags = 'K----'
   Waiv_Dev_Rej_No.Flags = 'K----'
   Activity_Seq.Flags = 'K----'
   Activity_Seq.Datatype = 'NUMBER(10)'
   Handling_Unit_Id.Flags = 'K----'
   Handling_Unit_Id.Datatype = 'NUMBER'
   Avg_Unit_Transit_Cost.Flags = 'A----'
   Count_Variance.Flags = 'A----'
   Expiration_Date.Flags = 'A----'
   Expiration_Date.Datatype = 'DATE'
   Freeze_Flag_Db.Datatype = 'STRING(20)'
   Last_Activity_Date.Datatype = 'DATE'
   Last_Count_Date.Flags = 'A----'
   Last_Count_Date.Datatype = 'DATE'
   Qty_In_Transit.Flags = 'A----'
   Qty_Onhand.Flags = 'A----'
   Qty_Reserved.Flags = 'A----'
   Receipt_Date.Flags = 'A----'
   Receipt_Date.Datatype = 'DATE'
   Source.Flags = 'A----'
   Source.Datatype = 'STRING(25)'
   Availability_Control_Id.Flags = 'A----'
   Rotable_Part_Pool_Id.Flags = 'A----'
   Part_Ownership_Db.Datatype = 'STRING(200)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Catch_Qty_Onhand.Prompt = 'Catch Qty On Hand'
   putaway_zone_refill_source_db.Falgs = 'A----'   
   putaway_zone_refill_source_db.DataType = 'STRING(5)'
   putaway_zone_refill_source_db.Prompt = 'Putaway Zone Refill Source'   
SELECT ipl.contract                     contract,
       ipl.part_no                      part_no,
       ipl.configuration_id             configuration_id,
       ipl.location_no                  location_no,
       ipl.lot_batch_no                 lot_batch_no,
       ipl.serial_no                    serial_no,
       ipl.eng_chg_level                eng_chg_level,
       ipl.waiv_dev_rej_no              waiv_dev_rej_no,
       ipl.activity_seq                 activity_seq,
       ipl.handling_unit_id             handling_unit_id,
       ipl.avg_unit_transit_cost        avg_unit_transit_cost,
       ipl.count_variance               count_variance,
       ipl.expiration_date              expiration_date,
       ipl.freeze_flag                  freeze_flag_db,
       ipl.last_activity_date           last_activity_date,
       ipl.last_count_date              last_count_date,
       ipl.location_type                location_type_db,
       ipl.qty_in_transit               qty_in_transit,
       ipl.qty_onhand                   qty_onhand,
       ipl.qty_reserved                 qty_reserved,
       ipl.receipt_date                 receipt_date,
       ipl.source                       source,
       ipl.warehouse                    warehouse,
       ipl.bay_no                       bay_no,
       ipl.row_no                       row_no,
       ipl.tier_no                      tier_no,
       ipl.bin_no                       bin_no,
       ipl.availability_control_id      availability_control_id,
       ipl.rotable_part_pool_id         rotable_part_pool_id,
       ipl.project_id                   project_id,
       (SELECT pac.description 
        FROM part_availability_control_tab pac 
        WHERE pac.availability_control_id = ipl.availability_control_id)                          description,
       NVL((SELECT pac.part_supply_control
            FROM part_availability_control_tab pac
            WHERE pac.availability_control_id = ipl.availability_control_id), 'NETTABLE')         part_supply_control_db,
       NVL((SELECT pac.part_reservation_control
            FROM part_availability_control_tab pac
            WHERE pac.availability_control_id = ipl.availability_control_id), 'AUTO RESERVATION') part_reservation_control_db,
       NVL((SELECT pac.part_order_issue_control
            FROM part_availability_control_tab pac
            WHERE pac.availability_control_id = ipl.availability_control_id), 'ORDER ISSUE')      part_order_issue_control_db,
       NVL((SELECT pac.part_manual_reserv_ctrl
            FROM part_availability_control_tab pac
            WHERE pac.availability_control_id = ipl.availability_control_id), 'MANUAL_RESERV')    part_manual_reserv_ctrl_db,
       NVL((SELECT pac.part_movement_control
            FROM part_availability_control_tab pac
            WHERE pac.availability_control_id = ipl.availability_control_id), 'ALL ALLOWED')      part_movement_control_db,
       NVL((SELECT pac.putaway_zone_refill_source
            FROM part_availability_control_tab pac
            WHERE pac.availability_control_id = ipl.availability_control_id), 'TRUE')             putaway_zone_refill_source_db,            
       NVL(ipl.part_ownership, 'COMPANY OWNED')                      part_ownership_db,
       ipl.owning_customer_no                                        owning_customer_no,
       ipl.owning_vendor_no                                          owning_vendor_no,
       ipl.catch_qty_in_transit                                      catch_qty_in_transit,
       ipl.catch_qty_onhand                                          catch_qty_onhand, 
       (SELECT route_order
           FROM warehouse_tab
           WHERE contract     = ipl.contract
             AND warehouse_id = ipl.warehouse)        warehouse_route_order,
       (SELECT route_order
           FROM warehouse_bay_tab
           WHERE contract     = ipl.contract
             AND warehouse_id = ipl.warehouse
             AND bay_id       = ipl.bay_no)           bay_route_order,
       (SELECT route_order
           FROM warehouse_bay_row_tab
           WHERE contract     = ipl.contract
             AND warehouse_id = ipl.warehouse
             AND bay_id       = ipl.bay_no
             AND row_id       = ipl.row_no)           row_route_order,
       (SELECT route_order
           FROM warehouse_bay_tier_tab
           WHERE contract     = ipl.contract
             AND warehouse_id = ipl.warehouse
             AND bay_id       = ipl.bay_no
             AND tier_id      = ipl.tier_no)          tier_route_order,
       (SELECT route_order
           FROM warehouse_bay_bin_tab
           WHERE contract     = ipl.contract
             AND warehouse_id = ipl.warehouse
             AND bay_id       = ipl.bay_no
             AND row_id       = ipl.row_no
             AND tier_id      = ipl.tier_no
             AND bin_id       = ipl.bin_no)           bin_route_order,
       (SELECT location_group
           FROM warehouse_bay_bin_tab
           WHERE contract     = ipl.contract
             AND warehouse_id = ipl.warehouse
             AND bay_id       = ipl.bay_no
             AND row_id       = ipl.row_no
             AND tier_id      = ipl.tier_no
             AND bin_id       = ipl.bin_no)           location_group,
       ipl.rowid                                                    objid,
       ltrim(lpad(to_char(ipl.rowversion,'YYYYMMDDHH24MISS'),2000))  objversion,       
       ipl.rowkey                                                   objkey
FROM INVENTORY_PART_IN_STOCK_TAB ipl;

VIEW Inventory_Part_In_Stock_Total IS
   Prompt = 'InvPartLocation'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Location_No.Flags = 'P----'
   Lot_Batch_No.Flags = 'K----'
   Serial_No.Flags = 'K----'
   Eng_Chg_Level.Flags = 'K----'
   Waiv_Dev_Rej_No.Flags = 'K----'
   Activity_Seq.Flags = 'K----'
   Activity_Seq.Datatype = 'NUMBER(10)'
   Handling_Unit_Id.Flags = 'K----'
   Handling_Unit_Id.Datatype = 'NUMBER'
   Avg_Unit_Transit_Cost.Flags = 'A----'
   Count_Variance.Flags = 'A----'
   Expiration_Date.Flags = 'A----'
   Expiration_Date.Datatype = 'DATE'
   Freeze_Flag_Db.Datatype = 'STRING(20)'
   Last_Activity_Date.Datatype = 'DATE'
   Last_Count_Date.Flags = 'A----'
   Last_Count_Date.Datatype = 'DATE'
   Qty_Onhand.Flags = 'A----'
   Qty_Reserved.Flags = 'A----'
   Qty_In_Transit.Flags = 'A----'
   Receipt_Date.Flags = 'A----'
   Receipt_Date.Datatype = 'DATE'
   Source.Flags = 'A----'
   Source.Datatype = 'STRING(25)'
   Availability_Control_Id.Flags = 'A----'
   Rotable_Part_Pool_Id.Flags = 'A----'
   Part_Ownership_Db.Datatype = 'STRING(200)'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Catch_Qty_Onhand.Prompt = 'Catch Qty On Hand'
   putaway_zone_refill_source_db.Falgs = 'A----'   
   putaway_zone_refill_source_db.DataType = 'STRING(5)'
   putaway_zone_refill_source_db.Prompt = 'Putaway Zone Refill Source'   
   Sscc.Flags = 'A----'
   Sscc.Datatype = 'STRING(18)'
   Sscc.Prompt = 'SSCC ID'   
   Alt_handling_unit_label_id.Flags = 'A----'
   Alt_handling_unit_label_id.Datatype = 'STRING(25)'
   Alt_handling_unit_label_id.Prompt = 'Alt Handling Unit Label ID'   
SELECT ip.contract                                 contract,
       ip.part_no                                  part_no,
       ip.configuration_id                         configuration_id,
       ip.location_no                              location_no,
       ip.lot_batch_no                             lot_batch_no,
       ip.serial_no                                serial_no,
       ip.eng_chg_level                            eng_chg_level,
       ip.waiv_dev_rej_no                          waiv_dev_rej_no,
       ip.activity_seq                             activity_seq,
       ip.handling_unit_id                         handling_unit_id,
       ip.avg_unit_transit_cost                    avg_unit_transit_cost,
       ip.count_variance                           count_variance,
       ip.expiration_date                          expiration_date,
       ip.freeze_flag_db                           freeze_flag_db,
       ip.last_activity_date                       last_activity_date,
       ip.last_count_date                          last_count_date,
       ip.location_type_db                         location_type_db,
       ip.qty_onhand                               qty_onhand,
       ip.qty_reserved                             qty_reserved,
       ip.qty_in_transit                           qty_in_transit,
       ip.receipt_date                             receipt_date,
       ip.source                                   source,
       ip.warehouse                                warehouse,
       ip.bay_no                                   bay_no,
       ip.row_no                                   row_no,
       ip.tier_no                                  tier_no,
       ip.bin_no                                   bin_no,
       ip.availability_control_id                  availability_control_id,
       ip.rotable_part_pool_id                     rotable_part_pool_id,
       ip.part_supply_control_db                   part_supply_control_db,
       ip.part_reservation_control_db              part_reservation_control_db,
       ip.part_order_issue_control_db              part_order_issue_control_db,
       ip.part_manual_reserv_ctrl_db               part_manual_reserv_ctrl_db,
       ip.part_movement_control_db                 part_movement_control_db,
       ip.putaway_zone_refill_source_db            putaway_zone_refill_source_db,
       DECODE(ip.serial_no, '*', DECODE(ip.lot_batch_no, '*', NULL, (SELECT lbm.condition_code
                                                                     FROM lot_batch_master_pub lbm
                                                                     WHERE ip.part_no = lbm.part_no
                                                                     AND ip.lot_batch_no = lbm.lot_batch_no)),
            (SELECT psc.condition_code
             FROM  part_serial_catalog_pub psc
             WHERE ip.part_no   = psc.part_no
             AND   ip.serial_no = psc.serial_no))  condition_code,
       ip.part_ownership_db                        part_ownership_db,
       ip.owning_vendor_no                         owning_vendor_no,
       ip.owning_customer_no                       owning_customer_no,
       ip.project_id                               project_id,
       ip.catch_qty_in_transit                     catch_qty_in_transit,
       ip.catch_qty_onhand                         catch_qty_onhand,
       Part_Serial_Catalog_API.Get_Operational_Condition(ip.part_no, ip.serial_no) operational_condition,
       ip.warehouse_route_order                    warehouse_route_order,
       ip.bay_route_order                          bay_route_order,
       ip.row_route_order                          row_route_order,
       ip.tier_route_order                         tier_route_order,
       ip.bin_route_order                          bin_route_order,
       (SELECT sscc
        FROM handling_unit_tab
        WHERE handling_unit_id = ip.handling_unit_id)  sscc,
       (SELECT alt_handling_unit_label_id
        FROM handling_unit_tab
        WHERE handling_unit_id = ip.handling_unit_id)  alt_handling_unit_label_id,
       ip.location_group                           location_group,
       ip.objid                                    objid,
       ip.objversion                               objversion,
       ip.OBJKEY                                   objkey
FROM   INVENTORY_PART_IN_STOCK_AVAIL ip;

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_In_Stock_Sum IS
   Prompt = 'InvPartLocationSum'
   Warehouse.Flags = 'A---L'
   Bay_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Qty_Onhand.Prompt = 'Qty On Hand'
SELECT   warehouse                      warehouse,
         bay_no                         bay_no,
         row_no                         row_no,
         tier_no                        tier_no,
         bin_no                         bin_no,
         contract                       contract,
         part_no                        part_no,
         configuration_id               configuration_id,
         location_no                    location_no,
         SUM(qty_onhand)                qty_onhand,
         SUM(qty_reserved)              qty_reserved
FROM     INVENTORY_PART_IN_STOCK_TAB
WHERE    qty_onhand > 0
GROUP BY contract,part_no,configuration_id,location_no,
         warehouse,bay_no,row_no,tier_no,bin_no;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov IS
   Prompt = 'InventoryPartInStockLov'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Location_No.Flags = 'K---L'
   Location_Type.Flags = 'A---L'
   Handling_Unit_Id.Flags = 'A---L'
   Qty_Onhand.Flags = 'A----'
   Qty_In_Transit.Flags = 'A----'
   Lot_Batch_No.Flags = 'A---L'
   Lot_Batch_No.Prompt = 'Lot batch no'
   Serial_No.Flags = 'A---L'
   Serial_No.Prompt = 'Serial no'
   Eng_Chg_Level.Flags = 'A---L'
   Eng_Chg_Level.Prompt = 'Eng Chg Level'
   Waiv_Dev_Rej_No.Flags = 'A---L'
   Waiv_Dev_Rej_No.Prompt = 'Waiv/Dev/Rej No'
   Freeze_Flag.Flags = 'A---L'
   Freeze_Flag.Prompt = 'Freeze flag'
   Part_Ownership.Flags = 'A----'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Part_Ownership_Db.Flags = 'A----'
   Location_Type_Db.Flags = 'A----'
   Freeze_Flag_Db.Flags = 'A----'
SELECT contract                 contract,
       part_no                  part_no,
       configuration_id         configuration_id,
       location_no              location_no,
       handling_unit_id         handling_unit_id,
       Inventory_Location_Type_API.Decode(location_type_db) location_type,
       location_type_db         location_type_db,
       qty_onhand               qty_onhand,
       qty_in_transit           qty_in_transit,
       qty_onhand - qty_reserved qty_available,
       lot_batch_no             lot_batch_no,
       serial_no                serial_no,
       eng_chg_level            eng_chg_level,
       waiv_dev_rej_no          waiv_dev_rej_no,
       Inventory_Part_Freeze_Code_API.Decode(freeze_flag_db) freeze_flag,
       freeze_flag_db           freeze_flag_db,
       warehouse                warehouse,
       bay_no                   bay_no,
       row_no                   row_no,
       tier_no                  tier_no,
       bin_no                   bin_no,
       condition_code condition_code,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       part_ownership_db        part_ownership_db,
       owning_vendor_no       owning_vendor_no,
       owning_customer_no     owning_customer_no,
       OBJKEY                 objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE location_type_db IN ('PICKING','F','MANUFACTURING')
AND   qty_onhand > 0;


@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov28 IS
   Prompt = 'InventoryPartInStockLov'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Location_No.Flags = 'P---L'
   Handling_Unit_Id.Flags = 'K---L'
   Lot_Batch_No.Flags = 'K---L'
   Lot_Batch_No.Prompt = 'Lot batch no'
   Serial_No.Flags = 'K---L'
   Serial_No.Prompt = 'Serial no'
   Eng_Chg_Level.Flags = 'K---L'
   Eng_Chg_Level.Prompt = 'Eng Chg Level'
   Waiv_Dev_Rej_No.Flags = 'K---L'
   Waiv_Dev_Rej_No.Prompt = 'Waiv/Dev/Rej No'
   Activity_Seq.Flags = 'K---L'
   Activity_Seq.Prompt = 'Activity Sequence'
   Sscc.Flags = 'A---L'
   Sscc.Datatype = 'STRING(200)'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Datatype = 'STRING(25)'
   part_ownership_db.Flags = 'A----'
   part_ownership.Flags = 'A----'
   owning_vendor_no.Flags = 'A----'
   owning_customer_no.Flags = 'A----'
   project_id.Flags = 'A----'
   qty_onhand.Flags = 'A---L'
   qty_reserved.Flags = 'A---L'
   location_type_db = 'Location Type'
   location_type_db.Flags = 'A----'
   Warehouse.Flags = 'A---L'  
   Bay_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
SELECT contract                                             contract,
       part_no                                              part_no,
       configuration_id                                     configuration_id,
       location_no                                          location_no,
       handling_unit_id                                     handling_unit_id,
       lot_batch_no                                         lot_batch_no,
       serial_no                                            serial_no,
       eng_chg_level                                        eng_chg_level,
       waiv_dev_rej_no                                      waiv_dev_rej_no,
       Activity_Seq                                         Activity_Seq,
       Handling_Unit_API.Get_Sscc(handling_unit_id)         sscc,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       condition_code                                       condition_code,
       part_ownership_db                                    part_ownership_db,
       Part_Ownership_API.Decode(part_ownership_db)         part_ownership,
       owning_vendor_no                                     owning_vendor_no,
       owning_customer_no                                   owning_customer_no,
       project_id                                           project_id,
       qty_onhand                                           qty_onhand,
       qty_reserved                                         qty_reserved,
       location_type_db                                     location_type_db,
       warehouse                                            warehouse,
       bay_no                                               bay_no,
       row_no                                               row_no,
       tier_no                                              tier_no,
       bin_no                                               bin_no,
       rowid                                                objid,
       objversion                                           objversion,
       objkey                                               objkey
 FROM  Inventory_Part_In_Stock_Total 
WHERE  qty_onhand > 0 ;

    
@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_Pick_Ship_Stock IS
   Prompt = 'InvPartPickShipStock'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Prompt = 'Lot batch no'
   Serial_No.Prompt = 'Serial no'
   Activity_Seq.Flags = 'KMI--'
   Activity_Seq.Datatype = 'NUMBER(10)'
   Handling_Unit_Id.Flags = 'KMI--'
   Handling_Unit_Id.Datatype = 'NUMBER'
   Avg_Unit_Transit_Cost.Prompt = 'Avg unit transit cost'
   Count_Variance.Prompt = 'Count variance'
   Expiration_Date.Datatype = 'DATE'
   Expiration_Date.Prompt = 'Expiration date'
   Freeze_Flag.Prompt = 'Freeze flag'
   Last_Activity_Date.Datatype = 'DATE'
   Last_Activity_Date.Prompt = 'Last activity date'
   Last_Count_Date.Datatype = 'DATE'
   Last_Count_Date.Prompt = 'Last count date'
   Location_Type.Prompt = 'Location type'
   Qty_In_Transit.Prompt = 'Qty in transit'
   Qty_Onhand.Prompt = 'Qty onhand'
   Qty_Reserved.Prompt = 'Qty reserved'
   Receipt_Date.Datatype = 'DATE'
   Receipt_Date.Prompt = 'Receipt date'
   Source.Datatype = 'STRING(25)'
   Part_Ownership.Flags = 'A----'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Catch_Qty_Onhand.Prompt = 'Catch Qty On Hand'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       handling_unit_id               handling_unit_id,
       avg_unit_transit_cost          avg_unit_transit_cost,
       count_variance                 count_variance,
       expiration_date                expiration_date,
       Inventory_Part_Freeze_Code_API.Decode(freeze_flag_db) freeze_flag,
       freeze_flag_db                 freeze_flag_db,
       last_activity_date             last_activity_date,
       last_count_date                last_count_date,
       Inventory_Location_Type_API.Decode(location_type_db) location_type,
       location_type_db               location_type_db,
       qty_in_transit                 qty_in_transit,
       qty_onhand                     qty_onhand,
       qty_reserved                   qty_reserved,
       receipt_date                   receipt_date,
       source                         source,
       warehouse                      warehouse,
       bay_no                         bay_no,
       row_no                         row_no,
       tier_no                        tier_no,
       bin_no                         bin_no,
       availability_control_id        availability_control_id,
       condition_code                 condition_code,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       part_ownership_db              part_ownership_db,
       owning_vendor_no               owning_vendor_no,
       owning_customer_no             owning_customer_no,
       project_id                     project_id,
       catch_qty_in_transit           catch_qty_in_transit,
       catch_qty_onhand               catch_qty_onhand,
       objid                          objid,
       objversion                     objversion,
       OBJKEY                         objkey
FROM INVENTORY_PART_IN_STOCK_TOTAL
WHERE location_type_db IN ('PICKING','F','SHIPMENT','MANUFACTURING');

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Deliv IS
   Prompt = 'InvPartLocationDeliv'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'PMI-L'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Prompt = 'Lot batch no'
   Serial_No.Prompt = 'Serial no'
   Activity_Seq.Flags = 'KMI--'
   Activity_Seq.Datatype = 'NUMBER(10)'
   Handling_Unit_Id.Flags = 'KMI--'
   Handling_Unit_Id.Datatype = 'NUMBER'
   Avg_Unit_Transit_Cost.Prompt = 'Avg unit transit cost'
   Count_Variance.Prompt = 'Count variance'
   Expiration_Date.Flags = 'A-IUL'
   Expiration_Date.Datatype = 'DATE'
   Expiration_Date.Prompt = 'Expiration date'
   Freeze_Flag.Prompt = 'Freeze flag'
   Last_Activity_Date.Datatype = 'DATE'
   Last_Activity_Date.Prompt = 'Last activity date'
   Last_Count_Date.Datatype = 'DATE'
   Last_Count_Date.Prompt = 'Last count date'
   Location_Type.Prompt = 'Location type'
   Qty_In_Transit.Prompt = 'Qty in transit'
   Qty_Onhand.Prompt = 'Qty onhand'
   Qty_Reserved.Prompt = 'Qty reserved'
   Receipt_Date.Datatype = 'DATE'
   Receipt_Date.Prompt = 'Receipt date'
   Source.Datatype = 'STRING(25)'
   Warehouse.Flags = 'A---L'
   Bay_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
   Part_Ownership.Flags = 'A----'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Catch_Qty_Onhand.Prompt = 'Catch Qty On Hand'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       handling_unit_id               handling_unit_id,
       avg_unit_transit_cost          avg_unit_transit_cost,
       count_variance                 count_variance,
       expiration_date                expiration_date,
       Inventory_Part_Freeze_Code_API.Decode(freeze_flag_db) freeze_flag,
       freeze_flag_db                    freeze_flag_db,
       last_activity_date             last_activity_date,
       last_count_date                last_count_date,
       Inventory_Location_Type_API.Decode(location_type_db) location_type,
       location_type_db               location_type_db,
       qty_in_transit                 qty_in_transit,
       qty_onhand                     qty_onhand,
       qty_reserved                   qty_reserved,
       receipt_date                   receipt_date,
       source                         source,
       warehouse                      warehouse,
       bay_no                         bay_no,
       row_no                         row_no,
       tier_no                        tier_no,
       bin_no                         bin_no,
       availability_control_id        availability_control_id,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       part_ownership_db              part_ownership_db,
       owning_vendor_no               owning_vendor_no,
       owning_customer_no             owning_customer_no,
       project_id                     project_id,
       catch_qty_in_transit           catch_qty_in_transit,
       catch_qty_onhand               catch_qty_onhand,
       condition_code                 condition_code,
       operational_condition          operational_condition,
       ROWID                          objid,
       objversion                     objversion,
       OBJKEY                         objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE  location_type_db IN ('PICKING','F','MANUFACTURING');

@SecurityCheck Site.UserAuthorized(ip.contract)
VIEW Inventory_Part_In_Stock_Lov3 IS
   Prompt = 'Inventory Locations'
   Contract.Flags = 'P----'
   Part_No.Flags = 'K----'
   Configuration_Id.Flags = 'K----'
   Location_No.Flags = 'K---L'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Location_Group.Flags = 'A---L'
   Location_Group.Prompt = 'Location Group'
   Location_Group.Ref = 'InventoryLocation'
   Location_Type.Flags = 'A---L'
   Location_Type.Prompt = 'Location type'
   Warehouse.Flags = 'A---L'
   Bay_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
   Part_Ownership.Flags = 'A---L'
   Owning_Vendor_No.Flags = 'A---L'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A---L'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Part_Ownership_Db.Flags = 'A----'
   Location_Type_Db.Flags = 'A----'
SELECT ip.contract                       contract,
       ip.part_no                        part_no,
       ip.configuration_id               configuration_id,
       ip.location_no                    location_no,
       wb.location_group                 location_group,
       Inventory_Location_Type_API.Decode(ip.location_type) location_type,
       ip.location_type                  location_type_db,
       warehouse                         warehouse,
       bay_no                            bay_no,
       row_no                            row_no,
       tier_no                           tier_no,
       bin_no                            bin_no,
       sum(ip.qty_onhand - ip.qty_reserved) qty_available,
       Part_Ownership_API.Decode(ip.part_ownership) part_ownership,
       ip.part_ownership                 part_ownership_db,
       owning_vendor_no                  owning_vendor_no,
       owning_customer_no                owning_customer_no
FROM  INVENTORY_PART_IN_STOCK_TAB ip, warehouse_bay_bin_tab wb
WHERE  ip.location_type IN ('PICKING','F','MANUFACTURING')
   AND (ip.qty_onhand - ip.qty_reserved) > 0
   AND wb.contract = ip.contract
   AND wb.warehouse_id = ip.warehouse
   AND wb.bay_id = ip.bay_no
   AND wb.tier_id = ip.tier_no
   AND wb.row_id = ip.row_no
   AND wb.bin_id = ip.bin_no
GROUP BY ip.contract, 
         ip.part_no, 
         ip.location_no,
         location_group,
         location_type,
         warehouse,
         bay_no,
         row_no,
         tier_no,
         bin_no,
         part_ownership,
         owning_vendor_no,
         owning_customer_no,
         ip.configuration_id;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov4 IS
   Prompt = 'Lot Batch No'
   Sort = 'CONTRACT, PART_NO, CONFIGURATION_ID, LOCATION_NO, HANDLING_UNIT_ID, SERIAL_NO, ENG_CHG_LEVEL, WAIV_DEV_REJ_NO, ACTIVITY_SEQ, LOT_BATCH_NO, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Handling_Unit_Id.Flags = 'K---L'
   Serial_No.Flags = 'K---L'
   Eng_Chg_Level.Flags = 'K---L'
   Waiv_Dev_Rej_No.Flags = 'K---L'
   Activity_Seq.Flags = 'K---L'
   Lot_Batch_No.Flags = 'K---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Condition_Code.Flags = 'A---L'
   Part_Ownership.Flags = 'A----'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Sscc.Flags = 'A---L'
   Sscc.Datatype = 'STRING(200)'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Datatype = 'STRING(25)'
   Handling_Unit_Type_Id.Flags = 'A---L'
   Handling_Unit_Type_Id.Datatype = 'STRING(25)'
   Handling_Unit_Type_Description.Flags = 'A---L'
   Handling_Unit_Type_Description.Datatype = 'STRING(200)'
   Parent_Handling_Unit_Id.Flags = 'A---L'
   Parent_Handling_Unit_Id.Datatype = 'NUMBER'
   Top_Parent_Handling_Unit_Id.Flags = 'A---L'
   Top_Parent_Handling_Unit_Id.Datatype = 'NUMBER'
   Part_Ownership_Db.Flags = 'A----'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       lot_batch_no                   lot_batch_no,
       handling_unit_id               handling_unit_id,
       Handling_Unit_API.Get_Sscc(handling_unit_id)                        sscc,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       project_id                     project_id,
       condition_code                 condition_code,
       (qty_onhand - qty_reserved) qty_available,
       Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id)       handling_unit_type_id,
       Handling_Unit_Type_API.Get_Description(Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id) )            handling_unit_type_description,
       Handling_Unit_API.Get_Parent_Handling_Unit_Id(handling_unit_id)     parent_handling_unit_id,
       Handling_Unit_API.Get_Top_Parent_Handl_Unit_Id(handling_unit_id)    top_parent_handling_unit_id,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       part_ownership_db              part_ownership_db,
       owning_vendor_no               owning_vendor_no,
       owning_customer_no             owning_customer_no,      
       OBJKEY                         objkey
FROM INVENTORY_PART_IN_STOCK_TOTAL
WHERE (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov5 IS
   Prompt = 'Serial No'
   Sort = 'CONTRACT, PART_NO, CONFIGURATION_ID, LOCATION_NO, HANDLING_UNIT_ID, SERIAL_NO, ENG_CHG_LEVEL, WAIV_DEV_REJ_NO, ACTIVITY_SEQ, LOT_BATCH_NO, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Handling_Unit_Id.Flags = 'P---L'
   Lot_Batch_No.Flags = 'P---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Eng_Chg_Level.Flags = 'P---L'
   Waiv_Dev_Rej_No.Flags = 'P---L'
   Activity_Seq.Flags = 'P---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Condition_Code.Flags = 'A---L'
   Part_Ownership.Flags = 'A----'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Serial_No.Flags = 'K---L'
   Sscc.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Handling_Unit_Type_Id.Flags = 'A---L'
   Handling_Unit_Type_Description.Flags = 'A---L'
   Parent_Handling_Unit_Id.Flags = 'A---L'
   Top_Parent_Handling_Unit_Id.Flags = 'A---L'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       serial_no                      serial_no,
       handling_unit_id               handling_unit_id,
       Handling_Unit_API.Get_Sscc(handling_unit_id)                        sscc,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       lot_batch_no                   lot_batch_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       project_id                     project_id,
       condition_code                 condition_code,
       (qty_onhand - qty_reserved)    qty_available,
       Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id)       handling_unit_type_id,
       Handling_Unit_Type_API.Get_Description(Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id) )            handling_unit_type_description,
       Handling_Unit_API.Get_Parent_Handling_Unit_Id(handling_unit_id)     parent_handling_unit_id,
       Handling_Unit_API.Get_Top_Parent_Handl_Unit_Id(handling_unit_id)    top_parent_handling_unit_id,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       owning_vendor_no               owning_vendor_no,
       owning_customer_no             owning_customer_no,
       OBJKEY                         objkey
FROM INVENTORY_PART_IN_STOCK_TOTAL
WHERE (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov6 IS
   Prompt = 'Engineer Change Level'
   Sort = 'CONTRACT, PART_NO, CONFIGURATION_ID, LOCATION_NO, HANDLING_UNIT_ID, LOT_BATCH_NO, SERIAL_NO, WAIV_DEV_REJ_NO, ENG_CHG_LEVEL, ACTIVITY_SEQ, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Handling_Unit_Id.Flags = 'P---L'
   Lot_Batch_No.Flags = 'P---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'P---L'
   Waiv_Dev_Rej_No.Flags = 'P---L'
   Eng_Chg_Level.Flags = 'K---L'
   Activity_Seq.Flags = 'P---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Sscc.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Handling_Unit_Type_Id.Flags = 'A---L'
   Handling_Unit_Type_Description.Flags = 'A---L'
   Parent_Handling_Unit_Id.Flags = 'A---L'
   Top_Parent_Handling_Unit_Id.Flags = 'A---L'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       eng_chg_level                  eng_chg_level,
       handling_unit_id               handling_unit_id,
       Handling_Unit_API.Get_Sscc(handling_unit_id)                        sscc,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       project_id                     project_id,
       (qty_onhand - qty_reserved)    qty_available,
       Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id)       handling_unit_type_id,
       Handling_Unit_Type_API.Get_Description(Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id) )            handling_unit_type_description,
       Handling_Unit_API.Get_Parent_Handling_Unit_Id(handling_unit_id)     parent_handling_unit_id,
       Handling_Unit_API.Get_Top_Parent_Handl_Unit_Id(handling_unit_id)    top_parent_handling_unit_id,
       OBJKEY                         objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE  (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov7 IS
   Prompt = 'Waiver Deviation Rejection No'
   Sort = 'CONTRACT, PART_NO, CONFIGURATION_ID, LOCATION_NO, HANDLING_UNIT_ID, SERIAL_NO, ENG_CHG_LEVEL, WAIV_DEV_REJ_NO, ACTIVITY_SEQ, LOT_BATCH_NO, QTY_AVAILABLE'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Handling_Unit_Id.Flags = 'P---L'
   Lot_Batch_No.Flags = 'P---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'P---L'
   Eng_Chg_Level.Flags = 'P---L'
   Activity_Seq.Flags = 'P---L'
   Waiv_Dev_Rej_No.Flags = 'K---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Sscc.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Handling_Unit_Type_Id.Flags = 'A---L'
   Handling_Unit_Type_Description.Flags = 'A---L'
   Parent_Handling_Unit_Id.Flags = 'A---L'
   Top_Parent_Handling_Unit_Id.Flags = 'A---L'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       waiv_dev_rej_no                waiv_dev_rej_no,
       handling_unit_id               handling_unit_id,
       Handling_Unit_API.Get_Sscc(handling_unit_id)                        sscc,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       activity_seq                   activity_seq,
       project_id                     project_id,
       (qty_onhand - qty_reserved)    qty_available,
       Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id)       handling_unit_type_id,
       Handling_Unit_Type_API.Get_Description(Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id) )            handling_unit_type_description,
       Handling_Unit_API.Get_Parent_Handling_Unit_Id(handling_unit_id)     parent_handling_unit_id,
       Handling_Unit_API.Get_Top_Parent_Handl_Unit_Id(handling_unit_id)    top_parent_handling_unit_id,
       OBJKEY                         objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE  (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov9 IS
   Prompt = 'Handling Unit ID'
   Sort = 'CONTRACT, PART_NO, CONFIGURATION_ID, LOCATION_NO, HANDLING_UNIT_ID, SERIAL_NO, ENG_CHG_LEVEL, WAIV_DEV_REJ_NO, ACTIVITY_SEQ, LOT_BATCH_NO, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Flags = 'P---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'P---L'
   Eng_Chg_Level.Prompt = 'Rev No'
   Eng_Chg_Level.Flags = 'P---L'
   Waiv_Dev_Rej_No.Flags = 'P---L'
   Activity_Seq.Flags = 'P---L'
   Handling_Unit_Id.Flags = 'K---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Sscc.Prompt = 'SSCC'
   Sscc.Flags = 'A---L'
   Sscc.Datatype = 'STRING(200)'
   Alt_Handling_Unit_Label_Id.Prompt = 'Alt Handling Unit Label ID'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Datatype = 'STRING(25)'
   Handling_Unit_Type_Id.Flags = 'A---L'
   Handling_Unit_Type_Id.Datatype = 'NUMBER'
   Handling_Unit_Type_Description.Flags = 'A---L'
   Handling_Unit_Type_Description.Datatype = 'STRING(200)'
   Parent_Handling_Unit_Id.Prompt = 'Parent Handling Unit ID'
   Parent_Handling_Unit_Id.Flags = 'A---L'
   Parent_Handling_Unit_Id.Datatype = 'NUMBER'
   Top_Parent_Handling_Unit_Id.Flags = 'A---L'
   Top_Parent_Handling_Unit_Id.Datatype = 'NUMBER'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       handling_unit_id               handling_unit_id,
       Handling_Unit_API.Get_Sscc(handling_unit_id)                        sscc,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       project_id                     project_id,
       (qty_onhand - qty_reserved)    qty_available,
       Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id)       handling_unit_type_id,
       Handling_Unit_Type_API.Get_Description(Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id) )            handling_unit_type_description,
       Handling_Unit_API.Get_Parent_Handling_Unit_Id(handling_unit_id)     parent_handling_unit_id,
       Handling_Unit_API.Get_Top_Parent_Handl_Unit_Id(handling_unit_id)    top_parent_handling_unit_id,
       OBJKEY                         objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE  (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov10 IS
   Prompt = 'Handling Unit ID'
   Sort = 'CONTRACT, PART_NO, CONFIGURATION_ID, LOCATION_NO, SSCC, HANDLING_UNIT_ID, SERIAL_NO, ENG_CHG_LEVEL, WAIV_DEV_REJ_NO, ACTIVITY_SEQ, LOT_BATCH_NO, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Flags = 'P---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'P---L'
   Eng_Chg_Level.Flags = 'P---L'
   Waiv_Dev_Rej_No.Flags = 'P---L'
   Activity_Seq.Flags = 'P---L'
   Handling_Unit_Id.Flags = 'K---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Sscc.Flags = 'A---L'
   Sscc.Datatype = 'STRING(200)'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Datatype = 'STRING(25)'
   Handling_Unit_Type_Id.Flags = 'A---L'
   Handling_Unit_Type_Id.Datatype = 'NUMBER'
   Handling_Unit_Type_Description.Flags = 'A---L'
   Handling_Unit_Type_Description.Datatype = 'STRING(200)'
   Parent_Handling_Unit_Id.Flags = 'A---L'
   Parent_Handling_Unit_Id.Datatype = 'NUMBER'
   Top_Parent_Handling_Unit_Id.Flags = 'A---L'
   Top_Parent_Handling_Unit_Id.Datatype = 'NUMBER'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       Handling_Unit_API.Get_Sscc(handling_unit_id)                        sscc,
       handling_unit_id               handling_unit_id,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       project_id                     project_id,
       (qty_onhand - qty_reserved)    qty_available,
       Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id)       handling_unit_type_id,
       Handling_Unit_Type_API.Get_Description(Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id) )            handling_unit_type_description,
       Handling_Unit_API.Get_Parent_Handling_Unit_Id(handling_unit_id)     parent_handling_unit_id,
       Handling_Unit_API.Get_Top_Parent_Handl_Unit_Id(handling_unit_id)    top_parent_handling_unit_id,
       OBJKEY                         objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE  (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(inventory_part_in_stock_total.contract)
VIEW Inventory_Part_In_Stock_Lov11 IS
   Prompt = 'Handling Unit ID'
   Sort = 'CONTRACT, PART_NO, CONFIGURATION_ID, LOCATION_NO, ALT_HANDLING_UNIT_LABEL_ID, HANDLING_UNIT_ID, SERIAL_NO, ENG_CHG_LEVEL, WAIV_DEV_REJ_NO, ACTIVITY_SEQ, LOT_BATCH_NO, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Flags = 'P---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'P---L'
   Eng_Chg_Level.Flags = 'P---L'
   Waiv_Dev_Rej_No.Flags = 'P---L'
   Activity_Seq.Flags = 'P---L'
   Handling_Unit_Id.Flags = 'K---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Sscc.Flags = 'A---L'
   Sscc.Datatype = 'STRING(200)'
   Alt_Handling_Unit_Label_Id.Flags = 'A---L'
   Alt_Handling_Unit_Label_Id.Datatype = 'STRING(25)'
   Handling_Unit_Type_Id.Flags = 'A---L'
   Handling_Unit_Type_Id.Datatype = 'NUMBER'
   Handling_Unit_Type_Description.Flags = 'A---L'
   Handling_Unit_Type_Description.Datatype = 'STRING(200)'
   Parent_Handling_Unit_Id.Flags = 'A---L'
   Parent_Handling_Unit_Id.Datatype = 'NUMBER'
   Top_Parent_Handling_Unit_Id.Flags = 'A---L'
   Top_Parent_Handling_Unit_Id.Datatype = 'NUMBER'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       Handling_Unit_API.Get_Alt_Handling_Unit_Label_Id(handling_unit_id)  alt_handling_unit_label_id,
       handling_unit_id               handling_unit_id,
       Handling_Unit_API.Get_Sscc(handling_unit_id)                        sscc,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       project_id                     project_id,
       (qty_onhand - qty_reserved)    qty_available,
       Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id)       handling_unit_type_id,
       Handling_Unit_Type_API.Get_Description(Handling_Unit_API.Get_Handling_Unit_Type_Id(handling_unit_id) )            handling_unit_type_description,
       Handling_Unit_API.Get_Parent_Handling_Unit_Id(handling_unit_id)     parent_handling_unit_id,
       Handling_Unit_API.Get_Top_Parent_Handl_Unit_Id(handling_unit_id)    top_parent_handling_unit_id,
       OBJKEY                         objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE  (qty_onhand - qty_reserved) > 0;
   
VIEW Inventory_Part_In_Stock_Loc IS
   Prompt = 'InventoryPartInStockLu'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Expiration_Date.Datatype = 'DATE'
   Freeze_Flag_Db.Datatype = 'STRING(20)'
   Last_Activity_Date.Datatype = 'DATE'
   Last_Count_Date.Datatype = 'DATE'
   Catch_Qty_Onhand.Flags = 'AMIUL'
   Catch_Qty_Onhand.Prompt = 'Catch Qty On Hand'
   Catch_Qty_In_Transit.Flags = 'AMIUL'
   Receipt_Date.Datatype = 'DATE'
   Description.Datatype = 'STRING(35)'
   Create_Date.Datatype = 'DATE'
   Rotable_Part_Pool_Id.Flags = 'A----'
   Rotable_Part_Pool_Id.Datatype = 'DATE'
SELECT ip.contract                       contract,
       ip.part_no                        part_no,
       ip.configuration_id               configuration_id,
       ip.location_no                    location_no,
       ip.lot_batch_no                   lot_batch_no,
       ip.serial_no                      serial_no,
       ip.eng_chg_level                  eng_chg_level,
       ip.waiv_dev_rej_no                waiv_dev_rej_no,
       ip.activity_seq                   activity_seq,
       ip.handling_unit_id               handling_unit_id,
       ip.avg_unit_transit_cost          avg_unit_transit_cost,
       ip.count_variance                 count_variance,
       ip.expiration_date                expiration_date,
       Inventory_Part_Freeze_Code_API.Decode(ip.freeze_flag) freeze_flag,
       ip.freeze_flag                    freeze_flag_db,
       ip.last_activity_date             last_activity_date,
       ip.last_count_date                last_count_date,
       Inventory_Location_Type_API.Decode(ip.location_type) location_type,
       ip.location_type                  location_type_db,
       ip.qty_in_transit                 qty_in_transit,
       ip.qty_onhand                     qty_onhand,
       ip.qty_reserved                   qty_reserved,
       ip.catch_qty_onhand               catch_qty_onhand,
       ip.catch_qty_in_transit           catch_qty_in_transit,
       ip.receipt_date                   receipt_date,
       ip.warehouse                      warehouse,
       ip.bay_no                         bay_no,
       ip.row_no                         row_no,
       ip.tier_no                        tier_no,
       ip.bin_no                         bin_no,
       ip.availability_control_id        availability_control_id,
       lg.location_group                 location_group,
       lg.description                    description,
       ip.create_date                    create_date,
       ip.rotable_part_pool_id           rotable_part_pool_id,
       ip.rowid                          objid,
       ltrim(lpad(to_char(ip.rowversion,'YYYYMMDDHH24MISS'),2000))  objversion,
       ip.rowkey                         objkey
FROM   INVENTORY_PART_IN_STOCK_TAB ip, warehouse_bay_bin_tab wb, inventory_location_group_tab lg
WHERE  wb.location_group = lg.location_group
AND    ip.contract = wb.contract
AND    ip.location_no = wb.location_no;


VIEW Inventory_Part_In_Stock_Res IS
   Prompt = 'InvPartLocation'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Location_No.Flags = 'P---L'
   Lot_Batch_No.Flags = 'K---L'
   Serial_No.Flags = 'K---L'
   Eng_Chg_Level.Flags = 'K---L'
   Waiv_Dev_Rej_No.Flags = 'K---L'
   Activity_Seq.Flags = 'P---L'
   Handling_Unit_Id.Flags = 'P---L'
   Expiration_Date.Flags = 'A----'
   Expiration_Date.Datatype = 'DATE'
   Qty_Onhand.Flags = 'A----'
   Qty_Reserved.Flags = 'A----'
   Qty_In_Transit.Flags = 'A----'
   Receipt_Date.Flags = 'A----'
   Receipt_Date.Datatype = 'DATE'
   Availability_Control_Id.Flags = 'A----'
   Part_Ownership.Flags = 'A----'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
SELECT contract                       contract,
       part_no                        part_no,
       configuration_id               configuration_id,
       location_no                    location_no,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       handling_unit_id               handling_unit_id,
       expiration_date                expiration_date,
       location_type_db               location_type_db,
       qty_onhand                     qty_onhand,
       qty_reserved                   qty_reserved,
       qty_in_transit                 qty_in_transit,
       receipt_date                   receipt_date,
       warehouse                      warehouse,
       bay_no                         bay_no,
       row_no                         row_no,
       tier_no                        tier_no,
       bin_no                         bin_no,
       availability_control_id        availability_control_id,
       condition_code                 condition_code,
       part_ownership_db              part_ownership_db,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       owning_vendor_no               owning_vendor_no,
       owning_customer_no             owning_customer_no,
       project_id                     project_id,
       catch_qty_in_transit           catch_qty_in_transit,
       catch_qty_onhand               catch_qty_onhand,
       objid                          objid,
       objversion                     objversion,
       OBJKEY                         objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL
WHERE  (EXISTS (SELECT 1 FROM user_allowed_site_pub WHERE inventory_part_in_stock_total.contract = site)) OR
       (EXISTS (SELECT 1 FROM user_allow_suppl_site_res_pub WHERE inventory_part_in_stock_total.contract = supply_site));

@SecurityCheck Site.UserAuthorized(ipis.contract)
VIEW Inventory_Part_In_Stock_Rot IS
   Prompt = 'InvPartLocation'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Location_No.Flags = 'P----'
   Lot_Batch_No.Flags = 'K----'
   Serial_No.Flags = 'K----'
   Eng_Chg_Level.Flags = 'K----'
   Waiv_Dev_Rej_No.Flags = 'K----'
   Availability_Control_Id.Flags = 'A----'
   Owning_Customer_No.Flags = 'A----'
   Part_Ownership_Db.Datatype = 'STRING(200)'
   Activity_Seq.Flags = 'K----'
   Activity_Seq.Datatype = 'NUMBER(10)'
   Handling_Unit_Id.Flags = 'K----'
   Handling_Unit_Id.Datatype = 'NUMBER'
SELECT ipis.contract                         contract,
       ipis.part_no                          part_no,
       ipis.configuration_id                 configuration_id,
       ipis.location_no                      location_no,
       ipis.lot_batch_no                     lot_batch_no,
       ipis.serial_no                        serial_no,
       ipis.eng_chg_level                    eng_chg_level,
       ipis.waiv_dev_rej_no                  waiv_dev_rej_no,
       ipis.availability_control_id          availability_control_id,
       psc.condition_code                    condition_code,
       psc.owning_customer_no                owning_customer_no,
       psc.part_ownership                    part_ownership_db,
       ip.inventory_valuation_method_db      inventory_valuation_method_db,
       ip.inventory_part_cost_level_db       inventory_part_cost_level_db,
       rps.rotable_part_pool_id              add_to_pool,
       ipis.activity_seq                     activity_seq,
       ipis.handling_unit_id                 handling_unit_id,
       ipis.rowid                            objid,
       ltrim(lpad(to_char(ipis.rowversion,'YYYYMMDDHH24MISS'),2000)) objversion,
       ipis.rowkey                          objkey
FROM   INVENTORY_PART_IN_STOCK_TAB ipis,
       inventory_part_pub ip,
       part_serial_catalog_pub psc,
       part_catalog_pub pc,
       rotable_pool_site_pub rps
WHERE  ipis.part_no = psc.part_no
   AND    ipis.serial_no = psc.serial_no
   AND    ipis.contract = rps.contract
   AND    ipis.part_no = pc.part_no
   AND    ipis.part_no = ip.part_no
   AND    ipis.contract = ip.contract
   AND    pc.position_part = 'NOT POSITION PART'
   AND    ipis.rotable_part_pool_id IS NULL
   AND    ipis.serial_no != '*'
   AND    (ipis.qty_onhand - ipis.qty_reserved) > 0
   AND    NOT (ipis.activity_seq > 0)
   AND    ipis.location_type IN ('PICKING', 'F', 'MANUFACTURING');

@SecurityCheck Site.UserAuthorized(ipi.contract)
VIEW Inventory_Part_In_Stock_Lov8 IS
   Prompt = 'InventoryPartInStockLov8'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Activity_Seq.Flags = 'P---L'
   Location_No.Flags = 'K---L'
   Location_Type.Flags = 'A---L'
   Lot_Batch_No.Flags = 'A---L'
   Lot_Batch_No.Prompt = 'Lot batch no'
   Serial_No.Flags = 'A---L'
   Serial_No.Prompt = 'Serial no'
   Eng_Chg_Level.Flags = 'A---L'
   Eng_Chg_Level.Prompt = 'Eng Chg Level'
   Waiv_Dev_Rej_No.Flags = 'A---L'
   Waiv_Dev_Rej_No.Prompt = 'Waiv/Dev/Rej No'
   Handling_Unit_Id.Flags = 'A---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Freeze_Flag.Flags = 'A---L'
   Freeze_Flag.Prompt = 'Freeze flag'
   Warehouse.Flags = 'A---L'
   Bay_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
   Condition_Code.Flags = 'A---L'
   Part_Ownership.Flags = 'A---L'
   Part_Ownership_Db.Prompt = 'Part Ownership Db'
   Owning_Vendor_No.Flags = 'A---L'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A---L'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Availability_Control_Id.Flags = 'A---L'
   Expiration_Date.Flags = 'A---L'
   Expiration_Date.Datatype = 'DATE'
   Qty_Onhand.Flags = 'A---L'
   Qty_Onhand.Prompt = 'On Hand Qty'
   Catch_Qty_Onhand.Flags = 'A---L'
   Catch_Qty_Onhand.Prompt = 'On Hand Catch Qty'
   Qty_Reserved.Flags = 'A---L'
   Qty_Reserved.Prompt = 'Reserved Qty'
   Qty_In_Transit.Flags = 'A---L'
   Qty_In_Transit.Prompt = 'In Transit Qty'
   Catch_Qty_In_Transit.Flags = 'A---L'
   Catch_Qty_In_Transit.Prompt = 'Catch Qty In Transit'
   Part_Ownership_Db.Flags = 'A----'
   Location_Type_Db.Flags = 'A----'
   Freeze_Flag_Db.Flags = 'A----'
SELECT ipi.contract             contract,
       ipi.part_no              part_no,
       configuration_id         configuration_id,
       activity_seq             activity_seq,
       handling_unit_id         handling_unit_id,
       location_no              location_no,
       Inventory_Location_Type_API.Decode(location_type_db) location_type,
       location_type_db         location_type_db,
       qty_onhand -qty_reserved qty_available,
       lot_batch_no             lot_batch_no,
       serial_no                serial_no,
       eng_chg_level            eng_chg_level,
       waiv_dev_rej_no          waiv_dev_rej_no,
       project_id               project_id,
       Inventory_Part_Freeze_Code_API.Decode(freeze_flag_db) freeze_flag,
       freeze_flag_db           freeze_flag_db,
       warehouse                warehouse,
       bay_no                   bay_no,
       row_no                   row_no,
       tier_no                  tier_no,
       bin_no                   bin_no,
       condition_code           condition_code,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       part_ownership_db        part_ownership_db,
       owning_vendor_no         owning_vendor_no,
       owning_customer_no       owning_customer_no,
       availability_control_id  availability_control_id,
       expiration_date          expiration_date,
       qty_onhand               qty_onhand,
       catch_qty_onhand         catch_qty_onhand,
       qty_reserved             qty_reserved,
       qty_in_transit           qty_in_transit,
       catch_qty_in_transit     catch_qty_in_transit,
       ip.unit_meas             unit_meas,
       ip.catch_unit_meas       catch_uom,
       ipi.objid                objid,
       ipi.OBJKEY               objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL ipi, inventory_part_pub ip
WHERE  location_type_db IN ('PICKING','F','MANUFACTURING')
  AND (qty_onhand - qty_reserved) > 0
  AND  part_manual_reserv_ctrl_db = 'MANUAL_RESERV'
  AND  ipi.part_no  = ip.part_no
  AND  ipi.contract = ip.contract  ;

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_Location IS
   Prompt = 'InvPartLocation'
   Part_No.Ref = 'InventoryPart(Contract)'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Expiration_Date.Datatype = 'DATE'
   Freeze_Flag_Db.Datatype = 'STRING(20)'
   Last_Activity_Date.Datatype = 'DATE'
   Last_Count_Date.Datatype = 'DATE'
   Receipt_Date.Datatype = 'DATE'
   Source.Datatype = 'STRING(25)'
SELECT contract                       contract,
       part_no                        part_no,
       location_no                    location_no,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       handling_unit_id               handling_unit_id,
       avg_unit_transit_cost          avg_unit_transit_cost,
       count_variance                 count_variance,
       expiration_date                expiration_date,
       Inventory_Part_Freeze_Code_API.Decode(freeze_flag) freeze_flag,
       freeze_flag                    freeze_flag_db,
       last_activity_date             last_activity_date,
       last_count_date                last_count_date,
       Inventory_Location_Type_API.Decode(location_type) location_type,
       location_type                  location_type_db,
       qty_in_transit                 qty_in_transit,
       qty_onhand                     qty_onhand,
       qty_reserved                   qty_reserved,
       receipt_date                   receipt_date,
       source                         source,
       warehouse                      warehouse,
       bay_no                         bay_no,
       row_no                         row_no,
       tier_no                        tier_no,
       bin_no                         bin_no,
       availability_control_id        availability_control_id,
       rowid                         objid,
       ltrim(lpad(to_char(rowversion,'YYYYMMDDHH24MISS'),2000))                    objversion,
       rowkey                        objkey
FROM   INVENTORY_PART_IN_STOCK_TAB
WHERE  configuration_id = '*';

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_In_Stock_Lov19 IS
   Prompt = 'Serial No'
   Sort = 'CONTRACT, PART_NO, LOCATION_NO, SERIAL_NO, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Serial_No.Flags = 'K---L'
   Lot_Batch_No.Flags = 'K---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Configuration_Id.Flags = 'K---L'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Eng_Chg_Level.Flags = 'K---L'
   Waiv_Dev_Rej_No.Flags = 'K---L'
   Activity_Seq.Flags = 'K---L'
   Handling_Unit_Id.Flags = 'K---L'
   Project_Id.Flags = 'A---L'
SELECT contract                       contract,
       part_no                        part_no,
       location_no                    location_no,
       serial_no                      serial_no,
       lot_batch_no                   lot_batch_no,
       configuration_id               configuration_id,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       handling_unit_id               handling_unit_id,
       project_id                     project_id, 
       (qty_onhand - qty_reserved)    qty_available,
       rowkey                        objkey
FROM   INVENTORY_PART_IN_STOCK_TAB
WHERE  (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_In_Stock_Lov20 IS
   Prompt = 'Serial No'
   Sort = 'CONTRACT, PART_NO, LOCATION_NO, SERIAL_NO, QTY_AVAILABLE'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Flags = 'K---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'K---L'
   Configuration_Id.Flags = 'K---L'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Eng_Chg_Level.Flags = 'K---L'
   Waiv_Dev_Rej_No.Flags = 'K---L'
   Activity_Seq.Flags = 'K---L'
   Handling_Unit_Id.Flags = 'K---L'
   Project_Id.Flags = 'A---L'
SELECT contract                       contract,
       part_no                        part_no,
       location_no                    location_no,
       lot_batch_no                   lot_batch_no,
       serial_no                      serial_no,
       configuration_id               configuration_id,
       eng_chg_level                  eng_chg_level,
       waiv_dev_rej_no                waiv_dev_rej_no,
       activity_seq                   activity_seq,
       handling_unit_id               handling_unit_id,
       project_id                     project_id,  
       (qty_onhand - qty_reserved)    qty_available,
       rowkey                        objkey
FROM   INVENTORY_PART_IN_STOCK_TAB
WHERE  (qty_onhand - qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(ip.contract)
VIEW Inventory_Part_In_Stock_Lov21 IS
   Prompt = 'Inventory Part In Stock LOV'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Location_No.Flags = 'K---L'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Handling_Unit_Id.Flags = 'K---L'
   Configuration_Id.Flags = 'K---L'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Lot_Batch_No.Flags = 'K---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'K---L'
   Eng_Chg_Level.Flags = 'K---L'
   Waiv_Dev_Rej_No.Flags = 'K---L'
   Activity_Seq.Flags = 'K---L'
   Project_Id.Flags = 'A---L'
   Warehouse.Flags = 'A---L'
   Bay_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Qty_Onhand.Flags = 'A---L'
   Qty_Onhand.Prompt = 'Qty on Hand'
   Qty_Reserved.Flags = 'A---L'
   Qty_In_Transit.Flags = 'A---L'
   Qty_In_Transit.Prompt = 'Qty in Transit'
SELECT ip.contract                         contract,
       ip.part_no                          part_no,
       ip.location_no                      location_no,
       ip.handling_unit_id                 handling_unit_id,
       ip.configuration_id                 configuration_id,
       ip.lot_batch_no                     lot_batch_no,
       ip.serial_no                        serial_no,
       ip.eng_chg_level                    eng_chg_level,
       ip.waiv_dev_rej_no                  waiv_dev_rej_no,
       ip.activity_seq                     activity_seq,
       ip.project_id                       project_id,
       ip.warehouse                        warehouse,
       ip.bay_no                           bay_no,
       ip.bin_no                           bin_no,
       ip.row_no                           row_no,
       ip.tier_no                          tier_no,
       NVL(SUM(qty_onhand),0)              qty_onhand,
       NVL(SUM(qty_reserved),0)            qty_reserved,
       NVL(SUM(qty_in_transit),0)          qty_in_transit
FROM   INVENTORY_PART_IN_STOCK_AVAIL ip
WHERE  part_supply_control_db = 'NETTABLE'
AND    ip.location_type_db IN ('PICKING','F','MANUFACTURING','SHIPMENT')
AND    part_ownership_db IN ('COMPANY OWNED', 'CONSIGNMENT')
GROUP  BY ip.contract, 
          ip.part_no, 
          ip.location_no, 
          ip.handling_unit_id,
          ip.configuration_id, 
          ip.lot_batch_no, 
          ip.serial_no, 
          ip.eng_chg_level, 
          ip.waiv_dev_rej_no, 
          ip.activity_seq, 
          ip.project_id, 
          warehouse, 
          bay_no, 
          bin_no, 
          row_no, 
          tier_no;


@SecurityCheck Site.UserAuthorized(ip.contract)
VIEW Inventory_Part_In_Stock_Lov22 IS
   Prompt = 'Lot Batch No Lov'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Flags = 'K---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Serial_No.Flags = 'A---L'
   Waiv_Dev_Rej_No.Flags = 'A---L'
   Part_Ownership.Flags = 'A---L'
   Part_Ownership_Db.Flags = 'A----'   
SELECT ip.contract                                    contract,
       ip.part_no                                     part_no,
       ip.location_no                                 location_no,
       ip.handling_unit_id                            handling_unit_id,
       ip.lot_batch_no                                lot_batch_no,
       ip.serial_no                                   serial_no,
       ip.waiv_dev_rej_no                             waiv_dev_rej_no,
       ip.eng_chg_level                               revision_no,
       Part_Ownership_API.Decode(ip.part_ownership)   part_ownership,
       ip.part_ownership                              part_ownership_db,
       ip.rowkey                                      objkey
FROM   INVENTORY_PART_IN_STOCK_TAB ip
WHERE  ip.qty_onhand > 0;

@SecurityCheck Site.UserAuthorized(ip.contract)
VIEW Inventory_Part_In_Stock_Lov23 IS
   Prompt = 'Serial No Lov'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Location_No.Flags = 'P----'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Serial_No.Flags = 'K---L'
   Lot_Batch_No.Flags = 'A---L'
   Lot_Batch_No.Prompt = 'Lot/Batch No'
   Waiv_Dev_Rej_No.Flags = 'A---L'
SELECT ip.contract                       contract,
       ip.part_no                        part_no,
       ip.location_no                    location_no,
       ip.handling_unit_id               handling_unit_id,
       ip.serial_no                      serial_no,
       ip.lot_batch_no                   lot_batch_no,
       ip.waiv_dev_rej_no                waiv_dev_rej_no,
       ip.eng_chg_level                  revision_no,
       ip.rowkey                        objkey
FROM   INVENTORY_PART_IN_STOCK_TAB ip
WHERE  ip.qty_onhand > 0;

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_In_Stock_Lov25 IS
   Prompt = 'Inventory Part In Stock Lov'
   Contract.Flags = 'P----'
   Contract.Ref = 'Site'
   Part_No.Flags = 'K---L'
   Description.Flags = 'A---L'
   Description.Datatype = 'STRING(200)'
   Configuration_Id.Flags = 'A---L'
   Configuration_Id.Datatype = 'STRING(50)'
   Location_No.Flags = 'K---L'
   Configuration_Id.Flags = 'K---L'
SELECT DISTINCT
       contract                                                   contract,
       configuration_id                                           configuration_id,
       location_no                                                location_no,
       part_no                                                    part_no,
       Inventory_Part_API.Get_Description(contract, part_no)      description,
       sum(qty_onhand - qty_reserved)                             qty_available       
FROM   INVENTORY_PART_IN_STOCK_TAB
WHERE  (qty_onhand - qty_reserved) > 0
AND    location_type IN ('PICKING','F','MANUFACTURING')
GROUP BY contract,
         location_no,
         configuration_id,       
         part_no;

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_In_Stock_Lov26 IS
   Prompt = 'Inventory Part In Stock Lov'
   Contract.Flags = 'P----'
   Contract.Ref = 'Site'
   Part_No.Flags = 'K---L'
   Description.Flags = 'A---L'
   Description.Datatype = 'STRING(200)'
   Configuration_Id.Flags = 'A---L'
   Configuration_Id.Datatype = 'STRING(50)'
SELECT DISTINCT
       contract                                                   contract,
       part_no                                                    part_no,
       Inventory_Part_API.Get_Description(contract, part_no)      description,
       configuration_id                                           configuration_id
FROM   INVENTORY_PART_IN_STOCK_TAB;

@SecurityCheck Site.UserAuthorized(ip.contract)
VIEW Inventory_Part_In_Stock_Lov27 IS
   Prompt = 'Inventory Part In Stock Lov'
   Contract.Flags = 'P---L'
   Part_No.Flags = 'P---L'
   Configuration_Id.Flags = 'P---L'
   Configuration_Id.Ref = 'InventoryPartConfig(contract,part_no)'
   Location_No.Flags = 'P---L'
   Location_No.Ref = 'InventoryLocation(Contract)'
   Lot_Batch_No.Flags = 'K----'
   Lot_Batch_No.Prompt = 'Lot batch no'
   Serial_No.Flags = 'K----'
   Serial_No.Prompt = 'Serial no'
   Eng_Chg_Level.Flags = 'K----'
   Waiv_Dev_Rej_No.Flags = 'K----'
   Activity_Seq.Flags = 'K----'
   Activity_Seq.Datatype = 'NUMBER(10)'
   Handling_Unit_Id.Flags = 'K----'
   Handling_Unit_Id.Datatype = 'NUMBER'
SELECT ip.contract                                                 contract,
       ip.part_no                                                  part_no,
       ip.configuration_id                                         configuration_id,
       ip.location_no                                              location_no,
       ip.handling_unit_id                                         handling_unit_id, 
       ip.lot_batch_no                                             lot_batch_no,
       ip.serial_no                                                serial_no,
       ip.eng_chg_level                                            eng_chg_level,
       ip.waiv_dev_rej_no                                          waiv_dev_rej_no,
       ip.activity_seq                                             activity_seq,
       ip.rowid                                                    objid,
       ltrim(lpad(to_char(ip.rowversion,'YYYYMMDDHH24MISS'),2000)) objversion,
       ip.rowkey                                                   objkey
FROM   INVENTORY_PART_IN_STOCK_TAB ip
WHERE  ip.location_type IN ('PICKING','F','MANUFACTURING')
AND    (ip.qty_onhand - ip.qty_reserved) > 0;

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_In_Stock_Lov29 IS
   Prompt = 'Inventory Part In Stock Lov'
   Contract.Flags = 'P----'
   Contract.Ref = 'Site'
   Part_No.Flags = 'K---L'
   Location_No.Flags = 'A---L'
   Warehouse.Flags = 'A---L'
   Bay_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
SELECT DISTINCT
       contract                                                   contract,
       part_no                                                    part_no,
       location_no                                                location_no,
       warehouse                                                  warehouse,
       bay_no                                                     bay_no,
       row_no                                                     row_no,
       tier_no                                                    tier_no,
       bin_no                                                     bin_no
FROM   INVENTORY_PART_IN_STOCK_TAB
WHERE  location_type IN ('PICKING','F','SHIPMENT','MANUFACTURING') 
AND    (qty_onhand - qty_reserved) > 0
AND    part_ownership IN ('COMPANY OWNED','CONSIGNMENT')
AND    activity_seq = 0;

@SecurityCheck Site.UserAuthorized(contract)
VIEW Inventory_Part_In_Stock_Uiv IS
   Source.Datatype = 'STRING(25)'
   Unit_Cost.FLAGS = 'A----'
   Unit_Cost.Datatype = 'NUMBER'
   Source_Ref1.Flags  = 'A----'
   Source_Ref1.Datatype = 'STRING(50)'
   Source_Ref1.Prompt = 'Source Ref 1'
   Source_Ref2.Flags  = 'A----'
   Source_Ref2.Datatype = 'STRING(50)'
   Source_Ref2.Prompt = 'Source Ref 2'
   Source_Ref3.Flags  = 'A----'
   Source_Ref3.Datatype = 'STRING(50)'
   Source_Ref3.Prompt = 'Source Ref 3'
   Source_Ref4.Flags  = 'A----'
   Source_Ref4.Datatype = 'STRING(50)'
   Source_Ref4.Prompt = 'Source Ref 4'
   Source_Ref_Type.Flags  = 'A----'
   Source_Ref_Type.Datatype = 'STRING(200)'
   Source_Ref_Type_Db.Flags  = 'A----'
   Source_Ref_Type_Db.Datatype = 'STRING(20)'
   Receipt_No.Flags  = 'A----'
   Receipt_No.Datatype = 'NUMBER'
SELECT contract                                                                     contract,
       part_no                                                                      part_no,
       configuration_id                                                             configuration_id,
       location_no                                                                  location_no,
       lot_batch_no                                                                 lot_batch_no,
       serial_no                                                                    serial_no,
       eng_chg_level                                                                eng_chg_level,
       waiv_dev_rej_no                                                              waiv_dev_rej_no,
       activity_seq                                                                 activity_seq,
       handling_unit_id                                                             handling_unit_id,
       avg_unit_transit_cost                                                        avg_unit_transit_cost,
       count_variance                                                               count_variance,
       expiration_date                                                              expiration_date,
       Inventory_Part_Freeze_Code_API.Decode(freeze_flag)                           freeze_flag,
       freeze_flag                                                                  freeze_flag_db,
       last_activity_date                                                           last_activity_date,
       last_count_date                                                              last_count_date,
       Inventory_Location_Type_API.Decode(location_type)                            location_type,
       location_type                                                                location_type_db,
       qty_in_transit                                                               qty_in_transit,
       qty_onhand                                                                   qty_onhand,
       qty_reserved                                                                 qty_reserved,
       receipt_date                                                                 receipt_date,
       source                                                                       source,
       warehouse                                                                    warehouse,
       bay_no                                                                       bay_no,
       row_no                                                                       row_no,
       tier_no                                                                      tier_no,
       bin_no                                                                       bin_no,
       availability_control_id                                                      availability_control_id,
       create_date                                                                  create_date,
       rotable_part_pool_id                                                         rotable_part_pool_id,
       project_id                                                                   project_id,
       catch_qty_in_transit                                                         catch_qty_in_transit,
       catch_qty_onhand                                                             catch_qty_onhand,
       Part_Ownership_API.Decode(part_ownership)                                    part_ownership,
       part_ownership                                                               part_ownership_db,
       owning_customer_no                                                           owning_customer_no,
       owning_vendor_no                                                             owning_vendor_no,
       Inventory_Part_In_Stock_API.Get_Company_Owned_Unit_Cost(contract,
                                                               part_no,
                                                               configuration_id, 
                                                               location_no,
                                                               lot_batch_no,
                                                               serial_no,
                                                               eng_chg_level,
                                                               waiv_dev_rej_no,
                                                               activity_seq,
                                                               handling_unit_id)    unit_cost,
       NULL                                                                         source_ref1,
       NULL                                                                         source_ref2,
       NULL                                                                         source_ref3,
       NULL                                                                         source_ref4,
       NULL                                                                         source_ref_type,
       NULL                                                                         source_ref_type_db,
       NULL                                                                         receipt_no,
       rowid                                                                        objid,
       ltrim(lpad(to_char(rowversion,'YYYYMMDDHH24MISS'),2000))                     objversion,
       rowkey                                                                       objkey
FROM   INVENTORY_PART_IN_STOCK_TAB;

VIEW Ship_Src_Reservation_Stock_Alt IS
   Bin_No.Flags = 'A----'
   Bin_No.Datatype = 'STRING(5)'
   Bin_No.Prompt = 'Bin'   
   Tier_No.Flags = 'A----'
   Tier_No.Datatype = 'STRING(5)'
   Tier_No.Prompt = 'Tier'   
   Row_No.Flags = 'A----'
   Row_No.Datatype = 'STRING(5)'
   Row_No.Prompt = 'Row'   
   Bay_No.Flags = 'A----'
   Bay_No.Datatype = 'STRING(5)'
   Bay_No.Prompt = 'Bay' 
   Warehouse.Flags = 'A----'
   Warehouse.Datatype = 'STRING(15)'
   Receipt_Date.Flags = 'A----'
   Receipt_Date.Datatype = 'DATE/DATETIME'
   Availability_Control_Id.Flags = 'A----'
   Warehouse.Datatype = 'STRING(25)'
   Part_Ownership_Db.Flags = 'A----'
   Part_Ownership_Db.Datatype = 'STRING(20)'
   Part_Ownership.Flags = 'A----'
   Part_Ownership.Datatype = 'STRING(200)'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Expiration_Date.Flags = 'A----'
   Expiration_Date.Datatype = 'DATE/DATE'  
SELECT   
$IF (Component_Shpmnt_SYS.INSTALLED) $THEN 
    shipment_id              shipment_id,
    source_ref1              source_ref1,
    source_ref2              source_ref2,
    source_ref3              source_ref3,
    source_ref4              source_ref4,    
    source_ref_type_db       source_ref_type_db,
    source_ref_type          source_ref_type,
    part_no                  part_no,
    contract                 contract,
    configuration_id         configuration_id,
    location_no              location_no,
    lot_batch_no             lot_batch_no,
    serial_no                serial_no,
    waiv_dev_rej_no          waiv_dev_rej_no,
    eng_chg_level            eng_chg_level,
    pick_list_no             pick_list_no,
    activity_seq             activity_seq,
    handling_unit_id         handling_unit_id,
    qty_assigned             qty_assigned,
    qty_assigned_to_reassign qty_assigned_to_reassign,
    qty_picked               qty_picked,
    catch_qty                catch_qty,
    bin_no                   bin_no,
    tier_no                  tier_no,
    row_no                   row_no,
    bay_no                   bay_no,
    warehouse                warehouse,
    receipt_date             receipt_date,
    availability_control_id  availability_control_id,
    part_ownership_db        part_ownership_db,
    part_ownership           part_ownership,
    owning_customer_no       owning_customer_no,
    owning_vendor_no         owning_vendor_no,
    expiration_date          expiration_date,
    objid                    objid,
    objversion               objversion,
    objkey                   objkey
 FROM Ship_Source_Reservation_Stock
$ELSE
   NULL                       shipment_id,
   NULL                       source_ref1,
   NULL                       source_ref2,
   NULL                       source_ref3,
   NULL                       source_ref4,    
   NULL                       source_ref_type_db,
   NULL                       source_ref_type,
   NULL                       part_no,
   NULL                       contract,
   NULL                       configuration_id,
   NULL                       location_no,
   NULL                       lot_batch_no,
   NULL                       serial_no,
   NULL                       waiv_dev_rej_no,
   NULL                       eng_chg_level,
   NULL                       pick_list_no,
   NULL                       activity_seq,
   NULL                       handling_unit_id,
   NULL                       qty_assigned,
   NULL                       qty_assigned_to_reassign,
   NULL                       qty_picked,
   NULL                       catch_qty,
   NULL                       bin_no,
   NULL                       tier_no,
   NULL                       row_no,
   NULL                       bay_no,
   NULL                       warehouse,
   to_date(NULL)              receipt_date,
   NULL                       availability_control_id,
   NULL                       part_ownership_db,
   NULL                       part_ownership,
   NULL                       owning_customer_no,
   NULL                       owning_vendor_no,
   to_date(NULL)              expiration_date,
   NULL                       objid,
   NULL                       objversion,
   NULL                       objkey
FROM DUAL
$END;


VIEW Single_Manual_Reservation_Alt IS
   Receiver_Type_Db.Flags = 'A----'
   Receiver_Type_Db.Datatype = 'STRING(20)'
   Part_No.Flags = 'A----'
   Part_No.Datatype = 'STRING(25)/UPPERCASE'
   Expiration_Date.Flags = 'A----'
   Expiration_Date.Datatype = 'DATE/DATE'
   Location_Type_Db.Flags = 'A----'
   Location_Type_Db.Datatype = 'STRING(20)'
   Location_Type_Db.Prompt = 'Location Type'
   Source_Qty_Reserved.Flags = 'A----'
   Source_Qty_Reserved.Datatype = 'NUMBER'
   Qty_Onhand.Flags = 'A----'
   Qty_Onhand.Datatype = 'NUMBER'
   Qty_Reserved.Flags = 'A----'
   Qty_Reserved.Datatype = 'NUMBER'
   Qty_In_Transit.Flags = 'A----'
   Qty_In_Transit.Datatype = 'NUMBER'
   Receipt_Date.Flags = 'A----'
   Receipt_Date.Datatype = 'DATE/DATETIME'
   Warehouse.Flags = 'A----'
   Warehouse.Datatype = 'STRING(15)'
   Bay_No.Flags = 'A----'
   Bay_No.Datatype = 'STRING(5)'
   Bay_No.Prompt = 'Bay'
   Row_No.Flags = 'A----'
   Row_No.Datatype = 'STRING(5)'
   Row_No.Prompt = 'Row'
   Tier_No.Flags = 'A----'
   Tier_No.Datatype = 'STRING(5)'
   Tier_No.Prompt = 'Tier'
   Bin_No.Flags = 'A----'
   Bin_No.Datatype = 'STRING(5)'
   Bin_No.Prompt = 'Bin'
   Availability_Control_Id.Flags = 'A----'
   Availability_Control_Id.Datatype = 'STRING(25)/UPPERCASE'
   Availability_Control_Id.Ref = 'PartAvailabilityControl/NOCHECK'
   Condition_Code.Flags = 'A----'
   Condition_Code.Datatype = 'STRING(10)'
   Part_Ownership_Db.Flags = 'A----'
   Part_Ownership_Db.Datatype = 'STRING(20)'
   Part_Ownership_Db.Prompt = 'Part Ownership'
   Part_Ownership.Flags = 'A----'
   Part_Ownership.Datatype = 'STRING(200)'
   Owning_Vendor_No.Flags = 'A----'
   Owning_Vendor_No.Datatype = 'STRING(20)/UPPERCASE'
   Owning_Vendor_No.Ref = 'Supplier/NOCHECK'
   Owning_Customer_No.Flags = 'A----'
   Owning_Customer_No.Datatype = 'STRING(20)/UPPERCASE'
   Project_Id.Flags = 'A----'
   Project_Id.Datatype = 'STRING(10)'
   Project_Id.Prompt = 'Project ID'
   Catch_Qty_In_Transit.Flags = 'A----'
   Catch_Qty_In_Transit.Datatype = 'NUMBER'
   Catch_Qty_Onhand.Flags = 'A----'
   Catch_Qty_Onhand.Datatype = 'NUMBER'  
SELECT   
$IF (Component_Shpmnt_SYS.INSTALLED) $THEN 
   source_ref1               source_ref1,
   source_ref2               source_ref2,
   source_ref3               source_ref3,
   source_ref4               source_ref4,
   shipment_id               shipment_id,
   receiver_type_db          receiver_type_db,
   source_ref_type_db        source_ref_type_db,
   contract                  contract,
   part_no                   part_no,
   configuration_id          configuration_id,
   location_no               location_no,
   lot_batch_no              lot_batch_no,
   serial_no                 serial_no,
   eng_chg_level             eng_chg_level,
   waiv_dev_rej_no           waiv_dev_rej_no,
   activity_seq              activity_seq,
   handling_unit_id          handling_unit_id,
   expiration_date           expiration_date,
   location_type_db          location_type_db,
   source_qty_reserved       source_qty_reserved,
   qty_onhand                qty_onhand,
   qty_reserved              qty_reserved,
   qty_in_transit            qty_in_transit,
   receipt_date              receipt_date,
   warehouse                 warehouse,
   bay_no                    bay_no,
   row_no                    row_no,
   tier_no                   tier_no,
   bin_no                    bin_no,
   availability_control_id   availability_control_id,
   condition_code            condition_code,
   part_ownership_db         part_ownership_db,
   part_ownership            part_ownership,
   owning_vendor_no          owning_vendor_no,
   owning_customer_no        owning_customer_no,
   project_id                project_id,
   catch_qty_in_transit      catch_qty_in_transit,
   catch_qty_onhand          catch_qty_onhand,
   objid                     objid,
   objversion                objversion,
   objkey                    objkey
 FROM Single_Manual_Reservation
$ELSE
   NULL                      source_ref1,              
   NULL                      source_ref2,              
   NULL                      source_ref3,              
   NULL                      source_ref4,              
   NULL                      shipment_id,              
   NULL                      receiver_type_db,         
   NULL                      source_ref_type_db,       
   NULL                      contract,                 
   NULL                      part_no,                  
   NULL                      configuration_id,         
   NULL                      location_no,              
   NULL                      lot_batch_no,             
   NULL                      serial_no,                
   NULL                      eng_chg_level,            
   NULL                      waiv_dev_rej_no,          
   NULL                      activity_seq,             
   NULL                      handling_unit_id,         
   to_date(NULL)             expiration_date,          
   NULL                      location_type_db, 
   NULL                      source_qty_reserved,        
   NULL                      qty_onhand,               
   NULL                      qty_reserved,             
   NULL                      qty_in_transit,           
   to_date(NULL)             receipt_date,             
   NULL                      warehouse,                
   NULL                      bay_no,                   
   NULL                      row_no,                   
   NULL                      tier_no,                  
   NULL                      bin_no,                   
   NULL                      availability_control_id,  
   NULL                      condition_code,           
   NULL                      part_ownership_db,        
   NULL                      part_ownership,           
   NULL                      owning_vendor_no,         
   NULL                      owning_customer_no,       
   NULL                      project_id,               
   NULL                      catch_qty_in_transit,     
   NULL                      catch_qty_onhand,         
   NULL                      objid,                    
   NULL                      objversion,               
   NULL                      objkey 
FROM DUAL
$END;

@SecurityCheck Site.UserAuthorized(ipi.contract)
VIEW Inventory_Part_In_Stock_Lov12 IS
   Prompt = 'InventoryPartInStockLov8'
   Contract.Flags = 'P----'
   Part_No.Flags = 'P----'
   Configuration_Id.Flags = 'P----'
   Activity_Seq.Flags = 'P---L'
   Location_No.Flags = 'K---L'
   Location_Type.Flags = 'A---L'
   Lot_Batch_No.Flags = 'A---L'
   Lot_Batch_No.Prompt = 'Lot batch no'
   Serial_No.Flags = 'A---L'
   Serial_No.Prompt = 'Serial no'
   Eng_Chg_Level.Flags = 'A---L'
   Eng_Chg_Level.Prompt = 'Eng Chg Level'
   Waiv_Dev_Rej_No.Flags = 'A---L'
   Waiv_Dev_Rej_No.Prompt = 'Waiv/Dev/Rej No'
   Handling_Unit_Id.Flags = 'A---L'
   Project_Id.Flags = 'A---L'
   Project_Id.Datatype = 'STRING(10)/UPPERCASE'
   Freeze_Flag.Flags = 'A---L'
   Freeze_Flag.Prompt = 'Freeze flag'
   Warehouse.Flags = 'A---L'
   Bay_No.Flags = 'A---L'
   Row_No.Flags = 'A---L'
   Tier_No.Flags = 'A---L'
   Bin_No.Flags = 'A---L'
   Condition_Code.Flags = 'A---L'
   Part_Ownership.Flags = 'A---L'
   Part_Ownership_Db.Prompt = 'Part Ownership Db'
   Owning_Vendor_No.Flags = 'A---L'
   Owning_Vendor_No.Datatype = 'STRING(20)'
   Owning_Customer_No.Flags = 'A---L'
   Owning_Customer_No.Datatype = 'STRING(20)'
   Availability_Control_Id.Flags = 'A---L'
   Expiration_Date.Flags = 'A---L'
   Expiration_Date.Datatype = 'DATE'
   Qty_Onhand.Flags = 'A---L'
   Qty_Onhand.Prompt = 'On Hand Qty'
   Catch_Qty_Onhand.Flags = 'A---L'
   Catch_Qty_Onhand.Prompt = 'On Hand Catch Qty'
   Qty_Reserved.Flags = 'A---L'
   Qty_Reserved.Prompt = 'Reserved Qty'
   Qty_In_Transit.Flags = 'A---L'
   Qty_In_Transit.Prompt = 'In Transit Qty'
   Catch_Qty_In_Transit.Flags = 'A---L'
   Catch_Qty_In_Transit.Prompt = 'Catch Qty In Transit'
   Part_Ownership_Db.Flags = 'A----'
   Location_Type_Db.Flags = 'A----'
   Freeze_Flag_Db.Flags = 'A----'
SELECT ipi.contract             contract,
       ipi.part_no              part_no,
       configuration_id         configuration_id,
       activity_seq             activity_seq,
       handling_unit_id         handling_unit_id,
       location_no              location_no,
       Inventory_Location_Type_API.Decode(location_type_db) location_type,
       location_type_db         location_type_db,
       qty_onhand -qty_reserved qty_available,
       lot_batch_no             lot_batch_no,
       serial_no                serial_no,
       eng_chg_level            eng_chg_level,
       waiv_dev_rej_no          waiv_dev_rej_no,
       project_id               project_id,
       Inventory_Part_Freeze_Code_API.Decode(freeze_flag_db) freeze_flag,
       freeze_flag_db           freeze_flag_db,
       warehouse                warehouse,
       bay_no                   bay_no,
       row_no                   row_no,
       tier_no                  tier_no,
       bin_no                   bin_no,
       condition_code           condition_code,
       Part_Ownership_API.Decode(part_ownership_db) part_ownership,
       part_ownership_db        part_ownership_db,
       owning_vendor_no         owning_vendor_no,
       owning_customer_no       owning_customer_no,
       availability_control_id  availability_control_id,
       expiration_date          expiration_date,
       qty_onhand               qty_onhand,
       catch_qty_onhand         catch_qty_onhand,
       qty_reserved             qty_reserved,
       qty_in_transit           qty_in_transit,
       catch_qty_in_transit     catch_qty_in_transit,
       ip.unit_meas             unit_meas,
       ip.catch_unit_meas       catch_uom,
       ipi.objid                objid,
       ipi.objversion           objversion,
       ipi.OBJKEY               objkey
FROM   INVENTORY_PART_IN_STOCK_TOTAL ipi, inventory_part_pub ip
WHERE  location_type_db IN ('PICKING','F','MANUFACTURING')  
  AND  part_manual_reserv_ctrl_db = 'MANUAL_RESERV'
  AND  ipi.part_no  = ip.part_no
  AND  ipi.contract = ip.contract  ;
