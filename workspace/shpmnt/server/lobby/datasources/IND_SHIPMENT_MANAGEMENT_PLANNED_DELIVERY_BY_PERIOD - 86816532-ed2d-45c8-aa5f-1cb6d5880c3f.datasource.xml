<SQLDataSource>
  <Author>IFS RnD</Author>
  <CopiedFrom>ef65e946-8a25-4576-bb31-6c27d44a660a</CopiedFrom>
  <LastModified>2019-03-26-10.57.47</LastModified>
  <Name>IND_SHIPMENT_MANAGEMENT_PLANNED_DELIVERY_BY_PERIOD</Name>
  <ID>86816532-ed2d-45c8-aa5f-1cb6d5880c3f</ID>
  <Select>
    <DataColumn>
      <Column>NVL(CASE WHEN PLANNED_SHIP_DATE &lt; to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' ) THEN 'Late' WHEN PLANNED_SHIP_DATE between trunc(to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' )) and trunc(to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' )) + ( 1 - 1/ ( 60*60*24 ) ) THEN 'Today' ELSE TO_CHAR(PLANNED_SHIP_DATE,CASE WHEN UPPER('$PERIOD$') = 'DAY' THEN 'YYYY-MM-DD' WHEN UPPER('$PERIOD$') = 'WEEK' THEN 'YYYY-IW' WHEN UPPER('$PERIOD$') = 'MONTH' THEN 'YYYY-MM' WHEN UPPER('$PERIOD$') = 'QUARTER' THEN 'YYYY-Q' WHEN UPPER('$PERIOD$') = 'YEAR' THEN 'YYYY' ELSE 'YYYY-MM' END) END,'NPSD')</Column>
      <Name>PERIOD</Name>
    </DataColumn>
    <DataColumn>
      <Column>COUNT(*)</Column>
      <Name>COUNT</Name>
      <DataType>Number</DataType>
    </DataColumn>
  </Select>
  <Where>SHIPMENT_CATEGORY_DB = 'NORMAL' AND ACTUAL_SHIP_DATE IS NULL AND OBJSTATE IN ('Preliminary','Completed') AND NVL(&amp;AO.COMPANY_SITE_API.GET_COMPANY(CONTRACT),'%') LIKE NVL('$COMPANY$','%') AND NVL(CONTRACT,'%') LIKE NVL('$SITE$','%') AND STATE LIKE NVL('$STATUS$','%') 
AND NVL(RECEIVER_ID,'%') LIKE NVL('$RECEIVER_ID$','%') AND NVL(NVL(&amp;AO.Shipment_Flow_API.Get_Next_Step(SHIPMENT_ID),'N/A'),'%') LIKE NVL('$NEXT_STEP$','%') AND NVL(SHIPMENT_TYPE,'%') LIKE NVL('$SHIPMENT_TYPE$','%') AND NVL(FORWARD_AGENT_ID,'N/A') LIKE NVL('$FORWARDER$','%') AND NVL(ROUTE_ID,'N/A') LIKE NVL('$ROUTE$','%') AND NVL(DELIVERY_TERMS,'N/A') LIKE NVL('$DELIVERY_TERMS$','%') AND NVL(SHIP_VIA_CODE,'N/A') LIKE NVL('$SHIP_VIA$','%') AND SHIPMENT_ID LIKE NVL('$SHIPMENT_ID$','%') AND NVL(TO_CHAR(PARENT_CONSOL_SHIPMENT_ID),'N/A') LIKE NVL('$CONSOLIDATED_SHIPMENT_ID$','%')

</Where>
  <View>&amp;AO.SHIPMENT</View>
  <OrderBy>DECODE(NVL(CASE WHEN PLANNED_SHIP_DATE &lt; to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' ) THEN 'Late' WHEN PLANNED_SHIP_DATE between trunc(to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' )) and trunc(to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' )) + ( 1 - 1/ ( 60*60*24 ) ) THEN 'Today' ELSE TO_CHAR(PLANNED_SHIP_DATE,CASE WHEN UPPER('$PERIOD$') = 'DAY' THEN 'YYYY-MM-DD' WHEN UPPER('$PERIOD$') = 'WEEK' THEN 'YYYY-IW' WHEN UPPER('$PERIOD$') = 'MONTH' THEN 'YYYY-MM' WHEN UPPER('$PERIOD$') = 'QUARTER' THEN 'YYYY-Q' WHEN UPPER('$PERIOD$') = 'YEAR' THEN 'YYYY' ELSE 'YYYY-MM' END) END,'NPSD'),'NPSD',1,'Late',2,'Today',3,4) ASC</OrderBy>
  <GroupBy>NVL(CASE WHEN PLANNED_SHIP_DATE &lt; to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' ) THEN 'Late' WHEN PLANNED_SHIP_DATE between trunc(to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' )) and trunc(to_date( '#TODAY#', 'YYYY-MM-DD-HH24:MI:SS' )) + ( 1 - 1/ ( 60*60*24 ) ) THEN 'Today' ELSE TO_CHAR(PLANNED_SHIP_DATE,CASE WHEN UPPER('$PERIOD$') = 'DAY' THEN 'YYYY-MM-DD' WHEN UPPER('$PERIOD$') = 'WEEK' THEN 'YYYY-IW' WHEN UPPER('$PERIOD$') = 'MONTH' THEN 'YYYY-MM' WHEN UPPER('$PERIOD$') = 'QUARTER' THEN 'YYYY-Q' WHEN UPPER('$PERIOD$') = 'YEAR' THEN 'YYYY' ELSE 'YYYY-MM' END) END,'NPSD')</GroupBy>
<Component>SHPMNT</Component>
<Locked>true</Locked>
</SQLDataSource>
